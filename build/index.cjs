'use strict';

var w = require('react');
var jsMonad = require('@tactics/js-monad');

function _interopDefault (e) { return e && e.__esModule ? e : { default: e }; }

var w__default = /*#__PURE__*/_interopDefault(w);

function V(e){w__default.default.useEffect(()=>{document.title=e;},[e]);}function S(e){w.useEffect(()=>{let t=document.querySelector('link[rel="apple-touch-icon"]');t||(t=document.createElement("link"),t.rel="apple-touch-icon",document.head.appendChild(t)),t.href=e;},[e]);}function g(e){w.useEffect(()=>{let t=document.querySelector('link[rel="icon"]:not([type="image/svg+xml"])');t||(t=document.createElement("link"),t.rel="icon",document.head.appendChild(t)),t.href=e;},[e]);}function v(e){w.useEffect(()=>{let t=document.querySelector('link[rel="icon"][type="image/svg+xml"]');t||(t=document.createElement("link"),t.type="image/svg+xml",t.rel="icon",document.head.appendChild(t)),e instanceof SVGElement?t.href="data:image/svg+xml;utf8,"+e:t.href=e;},[e]);}function U(e,r,t){w.useEffect(()=>{v(e),g(r),S(t);},[e,r,t]);}function X(){let[e,r]=w__default.default.useState(new jsMonad.Awaiting),t=w__default.default.useCallback(o=>navigator.clipboard&&navigator.clipboard.writeText(o).then(()=>{r(jsMonad.Success.of(o));}).catch(i=>{r(jsMonad.Failure.dueTo(i.message,i.name));}),[]);return [e,t]}function ee(e={}){let[r,t]=w__default.default.useState(new jsMonad.Awaiting),o=w__default.default.useRef(e);return w__default.default.useEffect(()=>{let i=({coords:u,timestamp:W})=>{t(jsMonad.Success.of({timestamp:W,latitude:u.latitude,longitude:u.longitude,altitude:u.altitude,accuracy:u.accuracy,altitudeAccuracy:u.altitudeAccuracy,heading:u.heading,speed:u.speed}));},n=u=>{t(jsMonad.Failure.dueTo(u.message,String(u.code)));},{enableHighAccuracy:s,timeout:l,maximumAge:c}=o.current;navigator.geolocation.getCurrentPosition(i,n,{enableHighAccuracy:s,timeout:l,maximumAge:c});let h=navigator.geolocation.watchPosition(i,n,{enableHighAccuracy:s,timeout:l,maximumAge:c});return ()=>{navigator.geolocation.clearWatch(h);}},[]),r}function te(e=1e3*60){let[r,t]=w__default.default.useState(!1);return w__default.default.useEffect(()=>{let o,i=()=>{t(!0);},n=oe(l=>{t(!1),window.clearTimeout(o),o=window.setTimeout(i,e);},500),s=()=>{document.hidden||n();};return o=window.setTimeout(i,e),window.addEventListener("mousemove",n),window.addEventListener("mousedown",n),window.addEventListener("resize",n),window.addEventListener("keydown",n),window.addEventListener("touchstart",n),window.addEventListener("wheel",n),document.addEventListener("visibilitychange",s),()=>{window.removeEventListener("mousemove",n),window.removeEventListener("mousedown",n),window.removeEventListener("resize",n),window.removeEventListener("keydown",n),window.removeEventListener("touchstart",n),window.removeEventListener("wheel",n),document.removeEventListener("visibilitychange",s),window.clearTimeout(o);}},[e]),r}function oe(e,r){let t;return function(...o){let i=this;t||(e.apply(i,o),t=!0,setTimeout(()=>t=!1,r));}}function a(e){let r=w__default.default.useCallback(i=>{let n=window.matchMedia(e);return n.addEventListener("change",i),()=>{n.removeEventListener("change",i);}},[e]),t=()=>window.matchMedia(e).matches,o=()=>{throw new Error("useMediaQuery is a client-only hook")};return w__default.default.useSyncExternalStore(r,t,o)}function y(){return a("(prefers-color-scheme: dark)")}function x(){return a("(prefers-contrast: more)")}function E(){return a("(prefers-contrast: less)")}function T(){return a("(prefers-reduced-motion: reduce)")}function L(){return a("(prefers-reduced-transparency: reduce)")}function ne(e,r={}){let[t,o]=w__default.default.useState(new jsMonad.Awaiting),i=w__default.default.useRef(r);return w__default.default.useEffect(()=>{let n=document.querySelector(`script[src="${e}"]`);if(n)switch(n.getAttribute("data-status")){case"ready":o(jsMonad.Success.of("ready"));break;case"error":o(jsMonad.Failure.dueTo(`Failed to load script: ${e}`,"error"));break;default:o(jsMonad.Success.of("external"));break}else if(n=document.createElement("script"),n){n.src=e,n.async=!0,document.body.appendChild(n);let s=()=>{n?.setAttribute("data-status","ready"),o(jsMonad.Success.of(!0)),c();},l=()=>{n?.setAttribute("data-status","error"),o(jsMonad.Failure.dueTo(`Failed to load script: ${e}`,"error")),c();},c=()=>{n?.removeEventListener("load",s),n?.removeEventListener("error",l);};n.addEventListener("load",s),n.addEventListener("error",l);let h=i.current.removeOnUnmount;return ()=>{h===!0&&(n?.remove(),c());}}else o(jsMonad.Failure.dueTo(`Failed to add script tag for : ${e}`,"error"));},[e]),t}function k(e,r,t,o){window.dispatchEvent(new StorageEvent("storage",{key:e,newValue:r,oldValue:t,storageArea:o}));}var z=e=>(window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)),D=()=>{throw Error("this is a client-only hook")};function f(e,r){let t=r.getItem(e);if(!t)return jsMonad.Failure.dueTo(`${e} is not available in ${r} storage`,"NOT_AVAILABLE");try{let o=JSON.parse(t);return jsMonad.Success.of(o)}catch{return jsMonad.Failure.dueTo(`${e} has invalid format in storage`,"INVALID_FORMAT")}}function I(e,r,t){let o=f(e,t);try{let i=JSON.stringify(r);return t.setItem(e,i),k(e,r,o instanceof jsMonad.Failure?null:o.unwrap(),t),jsMonad.Success.of(r)}catch{return jsMonad.Failure.dueTo(`${r} has invalid format to put into storage`,"INVALID_FORMAT")}}function C(e,r){let t=f(e,r);if(t instanceof jsMonad.Failure)return r.removeItem(e),jsMonad.Success.of(e);try{return r.removeItem(e),k(e,null,t.unwrap(),r),jsMonad.Success.of(e)}catch{return jsMonad.Failure.dueTo(`${e} could not be removed from storage`,"INVALID_FORMAT")}}function ie(e,r,t){let o=()=>f(e,t),i=w__default.default.useSyncExternalStore(z,o,D),n=w__default.default.useCallback(l=>{let c=l;c===null?C(e,t):I(e,c,t);},[e,i]),s=w__default.default.useCallback(()=>{C(e,t);},[e,i]);return w__default.default.useEffect(()=>{I(e,r,t);},[e,r]),[i,n,s]}function se(){let[e,r]=w__default.default.useState({x:0,y:0}),t=w__default.default.useCallback((...o)=>{if(typeof o[0]=="object")window.scrollTo(o[0]);else if(typeof o[0]=="number"&&typeof o[1]=="number")window.scrollTo(o[0],o[1]);else throw new Error("Invalid arguments passed to scrollTo. See here for more info: https://developer.mozilla.org/en-US/docs/Web/API/Window/scrollTo")},[]);return w__default.default.useLayoutEffect(()=>{let o=()=>{r({x:window.scrollX,y:window.scrollY});};return o(),window.addEventListener("scroll",o),()=>{window.removeEventListener("scroll",o);}},[]),[e,t]}function ae(){let[e,r]=w__default.default.useState({width:0,height:0});return w__default.default.useLayoutEffect(()=>{let t=()=>{r({width:window.innerWidth,height:window.innerHeight});};return t(),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t);}},[]),e}var m=class{constructor(r,t,o,i,n){this.reducedMotion=r,this.highContrast=t,this.lowContrast=o,this.reducedTransparency=i,this.darkMode=n;}prefersDarkMode(){return this.darkMode}prefersHighContrast(){return this.highContrast}prefersLowContrast(){return this.lowContrast}prefersReducedMotion(){return this.reducedMotion}prefersTransparency(){return this.reducedTransparency}};var ue=()=>{let e=T(),r=x(),t=E(),o=L(),i=y();return new m(e,r,t,o,i)};

exports.BrowserAccessibilityPreferences = m;
exports.useAppleTouchFavicon = S;
exports.useBrowserAccessibilityPreferences = ue;
exports.useCopyToClipboard = X;
exports.useDocumentTitle = V;
exports.useFavicon = U;
exports.useGeolocation = ee;
exports.useIcoFavicon = g;
exports.useIdle = te;
exports.useMediaQuery = a;
exports.usePrefersDarkMode = y;
exports.usePrefersHighContast = x;
exports.usePrefersLowContrast = E;
exports.usePrefersReducedMotion = T;
exports.usePrefersReducedTransparancy = L;
exports.useScript = ne;
exports.useStorage = ie;
exports.useSvgFavicon = v;
exports.useWindowScroll = se;
exports.useWindowSize = ae;
//# sourceMappingURL=out.js.map
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9ob29rcy91c2UtZG9jdW1lbnQtdGl0bGUudHMiLCIuLi9zcmMvaG9va3MvdXNlLWZhdmljb24udHMiLCIuLi9zcmMvaG9va3MvdXNlLWFwcGxlLXRvdWNoLWZhdmljb24udHMiLCIuLi9zcmMvaG9va3MvdXNlLWljby1mYXZpY29uLnRzIiwiLi4vc3JjL2hvb2tzL3VzZS1zdmctZmF2aWNvbi50cyIsIi4uL3NyYy9ob29rcy91c2UtY29weS10by1jbGlwYm9hcmQudHMiLCIuLi9zcmMvaG9va3MvdXNlLWdlb2xvY2F0aW9uLnRzIiwiLi4vc3JjL2hvb2tzL3VzZS1pZGxlLnRzIiwiLi4vc3JjL2hvb2tzL3VzZS1tZWRpYS1xdWVyeS50cyIsIi4uL3NyYy9ob29rcy91c2UtcHJlZmVycy1kYXJrLW1vZGUudHMiLCIuLi9zcmMvaG9va3MvdXNlLXByZWZlcnMtaGlnaC1jb250YXN0LnRzIiwiLi4vc3JjL2hvb2tzL3VzZS1wcmVmZXJzLWxvdy1jb250cmFzdC50cyIsIi4uL3NyYy9ob29rcy91c2UtcHJlZmVycy1yZWR1Y2VkLW1vdGlvbi50cyIsIi4uL3NyYy9ob29rcy91c2UtcHJlZmVycy1yZWR1Y2VkLXRyYW5zcGFyYW5jeS50cyIsIi4uL3NyYy9ob29rcy91c2Utc2NyaXB0LnRzIiwiLi4vc3JjL2hvb2tzL3VzZS1zdG9yYWdlLnRzIiwiLi4vc3JjL3N0b3JhZ2Uvc3RvcmFnZS50cyIsIi4uL3NyYy9ob29rcy91c2Utd2luZG93LXNjcm9sbC50cyIsIi4uL3NyYy9ob29rcy91c2Utd2luZG93LXNpemUudHMiLCIuLi9zcmMvYWNjZXNzaWJpbGl0eS9wcmVmZXJlbmNlcy50cyIsIi4uL3NyYy9ob29rcy91c2UtYWNjZXNzaWJpbGl0eS1wcmVmZXJlbmNlcy50cyJdLCJuYW1lcyI6WyJSZWFjdCIsInVzZURvY3VtZW50VGl0bGUiLCJ0aXRsZSIsInVzZUVmZmVjdCIsInVzZUFwcGxlVG91Y2hGYXZpY29uIiwiYXBwbGVUb3VjaCIsImFwcGxlVG91Y2hMaW5rIiwidXNlSWNvRmF2aWNvbiIsImljbyIsImljb0xpbmsiLCJ1c2VTdmdGYXZpY29uIiwic3ZnIiwic3ZnTGluayIsInVzZUZhdmljb24iLCJBd2FpdGluZyIsIkZhaWx1cmUiLCJTdWNjZXNzIiwidXNlQ29weVRvQ2xpcGJvYXJkIiwiY29waWVkVGV4dCIsInNldENvcGllZFRleHQiLCJjb3B5VG9DbGlwYm9hcmQiLCJ2YWx1ZSIsImVycm9yIiwidXNlR2VvbG9jYXRpb24iLCJvcHRpb25zIiwic3RhdGUiLCJzZXRTdGF0ZSIsIm9wdGlvbnNSZWYiLCJvbkV2ZW50IiwiY29vcmRzIiwidGltZXN0YW1wIiwib25FdmVudEVycm9yIiwiZW5hYmxlSGlnaEFjY3VyYWN5IiwidGltZW91dCIsIm1heGltdW1BZ2UiLCJ3YXRjaElkIiwidXNlSWRsZSIsIm1zIiwiaWRsZSIsInNldElkbGUiLCJ0aW1lb3V0SWQiLCJoYW5kbGVUaW1lb3V0IiwiaGFuZGxlRXZlbnQiLCJ0aHJvdHRsZSIsImUiLCJoYW5kbGVWaXNpYmlsaXR5Q2hhbmdlIiwiZnVuYyIsImxpbWl0IiwiaW5UaHJvdHRsZSIsImFyZ3MiLCJjb250ZXh0IiwidXNlTWVkaWFRdWVyeSIsInF1ZXJ5Iiwic3Vic2NyaWJlIiwiY2FsbGJhY2siLCJtYXRjaE1lZGlhIiwiZ2V0U25hcHNob3QiLCJnZXRTZXJ2ZXJTbmFwc2hvdCIsInVzZVByZWZlcnNEYXJrTW9kZSIsInVzZVByZWZlcnNIaWdoQ29udGFzdCIsInVzZVByZWZlcnNMb3dDb250cmFzdCIsInVzZVByZWZlcnNSZWR1Y2VkTW90aW9uIiwidXNlUHJlZmVyc1JlZHVjZWRUcmFuc3BhcmFuY3kiLCJ1c2VTY3JpcHQiLCJzcmMiLCJzdGF0dXMiLCJzZXRTdGF0dXMiLCJzY3JpcHQiLCJoYW5kbGVTY3JpcHRMb2FkIiwiY2xlYW51cExpc3RlbmVycyIsImhhbmRsZVNjcmlwdEVycm9yIiwicmVtb3ZlT25Vbm1vdW50IiwiZGlzcGF0Y2hTdG9yYWdlRXZlbnQiLCJrZXkiLCJuZXdWYWx1ZSIsIm9sZFZhbHVlIiwic3RvcmFnZUFyZWEiLCJ1c2VTdG9yYWdlU3Vic2NyaWJlIiwiZ2V0U3RvcmFnZVNlcnZlclNuYXBzaG90IiwiZ2V0U3RvcmFnZUl0ZW0iLCJpdGVtIiwib2JqZWN0Iiwic2V0U3RvcmFnZUl0ZW0iLCJjdXJyZW50SXRlbSIsInJlbW92ZVN0b3JhZ2VJdGVtIiwidXNlU3RvcmFnZSIsImluaXRpYWxWYWx1ZSIsInN0b3JlZCIsInNldCIsIm5leHRTdGF0ZSIsImNsZWFyIiwidXNlV2luZG93U2Nyb2xsIiwic2Nyb2xsVG8iLCJoYW5kbGVTY3JvbGwiLCJ1c2VXaW5kb3dTaXplIiwic2l6ZSIsInNldFNpemUiLCJoYW5kbGVSZXNpemUiLCJCcm93c2VyQWNjZXNzaWJpbGl0eVByZWZlcmVuY2VzIiwicmVkdWNlZE1vdGlvbiIsImhpZ2hDb250cmFzdCIsImxvd0NvbnRyYXN0IiwicmVkdWNlZFRyYW5zcGFyZW5jeSIsImRhcmtNb2RlIiwidXNlQnJvd3NlckFjY2Vzc2liaWxpdHlQcmVmZXJlbmNlcyIsImhhc1JlZHVjZWRNb3Rpb24iLCJoYXNIaWdoQ29udHJhc3QiLCJoYXNMb3dDb250cmFzdCIsImhhc1JlZHVjZWRUcmFuc3BhcmVuY3kiLCJoYXNEYXJrTW9kZSJdLCJtYXBwaW5ncyI6IkFBQUEsT0FBT0EsTUFBVyxRQUVYLFNBQVNDLEVBQWlCQyxFQUFlLENBQzlDRixFQUFNLFVBQVUsSUFBTSxDQUNwQixTQUFTLE1BQVFFLENBQ25CLEVBQUcsQ0FBQ0EsQ0FBSyxDQUFDLENBQ1osQ0NOQSxPQUFTLGFBQUFDLE1BQWlCLFFDQTFCLE9BQVMsYUFBQUEsTUFBaUIsUUFFbkIsU0FBU0MsRUFDZEMsRUFDTSxDQUNORixFQUFVLElBQU0sQ0FHZCxJQUFJRyxFQUNGLFNBQVMsY0FGYSw4QkFFaUMsRUFDcERBLElBQ0hBLEVBQWlCLFNBQVMsY0FBYyxNQUFNLEVBQzlDQSxFQUFlLElBQU0sbUJBQ3JCLFNBQVMsS0FBSyxZQUFZQSxDQUFjLEdBRTFDQSxFQUFlLEtBQU9ELENB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RUFFQSxPQUFBQyxFQUFhLEVBQ2IsT0FBTyxpQkFBaUIsU0FBVUEsQ0FBWSxFQUV2QyxJQUFNLENBQ1gsT0FBTyxvQkFBb0IsU0FBVUEsQ0FBWSxDQUNuRCxDQUNGLEVBQUcsQ0FBQyxDQUFDLEVBRUVGLENBQ1QsQ0M5Qk8sSUFBTUcsRUFBTixLQUFzQyxDQU8zQyxZQUNFQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBLENBQ0EsS0FBSyxjQUFnQkosRUFDckIsS0FBSyxhQUFlQyxFQUNwQixLQUFLLFlBQWNDLEVBQ25CLEtBQUssb0JBQXNCQyxFQUMzQixLQUFLLFNBQVdDLENBQ2xCLENBRUEsaUJBQTJCLENBQ3pCLE9BQU8sS0FBSyxRQUNkLENBRUEscUJBQStCLENBQzdCLE9BQU8sS0FBSyxZQUNkLENBRUEsb0JBQThCLENBQzVCLE9BQU8sS0FBSyxXQUNkLENBRUEsc0JBQWdDLENBQzlCLE9BQU8sS0FBSyxhQUNkLENBRUEscUJBQStCLENBQzdCLE9BQU8sS0FBSyxtQkFDZCxDQUNGLEVDaENBLElBQU1DLEdBQ0osSUFBdUMsQ0FDckMsSUFBTUMsRUFBbUI1QyxFQUF3QixFQUMzQzZDLEVBQWtCL0MsRUFBc0IsRUFDeENnRCxFQUFpQi9DLEVBQXNCLEVBQ3ZDZ0QsRUFBeUI5QyxFQUE4QixFQUN2RCtDLEVBQWNuRCxFQUFtQixFQUV2QyxPQUFPLElBQUl3QyxFQUNUTyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxDQUNGLENBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VEb2N1bWVudFRpdGxlKHRpdGxlOiBzdHJpbmcpIHtcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBkb2N1bWVudC50aXRsZSA9IHRpdGxlO1xuICB9LCBbdGl0bGVdKTtcbn1cbiIsImltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdXNlQXBwbGVUb3VjaEZhdmljb24gfSBmcm9tIFwiQC9ob29rcy91c2UtYXBwbGUtdG91Y2gtZmF2aWNvblwiO1xuaW1wb3J0IHsgdXNlSWNvRmF2aWNvbiB9IGZyb20gXCJAL2hvb2tzL3VzZS1pY28tZmF2aWNvblwiO1xuaW1wb3J0IHsgdXNlU3ZnRmF2aWNvbiB9IGZyb20gXCJAL2hvb2tzL3VzZS1zdmctZmF2aWNvblwiO1xuXG4vLyBodHRwczovL2V2aWxtYXJ0aWFucy5jb20vY2hyb25pY2xlcy9ob3ctdG8tZmF2aWNvbi1pbi0yMDIxLXNpeC1maWxlcy10aGF0LWZpdC1tb3N0LW5lZWRzXG5leHBvcnQgZnVuY3Rpb24gdXNlRmF2aWNvbihcbiAgc3ZnOiBzdHJpbmcgfCBTVkdFbGVtZW50LFxuICBpY286IHN0cmluZywgLy8gMzJ4MzJcbiAgYXBwbGVUb3VjaDogc3RyaW5nLCAvLyAxODDDlzE4MFxuKTogdm9pZCB7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdXNlU3ZnRmF2aWNvbihzdmcpO1xuICAgIHVzZUljb0Zhdmljb24oaWNvKTtcbiAgICB1c2VBcHBsZVRvdWNoRmF2aWNvbihhcHBsZVRvdWNoKTtcbiAgfSwgW3N2ZywgaWNvLCBhcHBsZVRvdWNoXSk7XG59XG4iLCJpbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUFwcGxlVG91Y2hGYXZpY29uKFxuICBhcHBsZVRvdWNoOiBzdHJpbmcsIC8vIDE4MMOXMTgwXG4pOiB2b2lkIHtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBRdWVyeSBmb3IgdGhlIGFwcGxlIHRvdWNoIGxpbmtcbiAgICBjb25zdCBhcHBsZVRvdWNoUXVlcnkgPSAnbGlua1tyZWw9XCJhcHBsZS10b3VjaC1pY29uXCJdJztcbiAgICBsZXQgYXBwbGVUb3VjaExpbmsgPVxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MTGlua0VsZW1lbnQ+KGFwcGxlVG91Y2hRdWVyeSk7XG4gICAgaWYgKCFhcHBsZVRvdWNoTGluaykge1xuICAgICAgYXBwbGVUb3VjaExpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcbiAgICAgIGFwcGxlVG91Y2hMaW5rLnJlbCA9IFwiYXBwbGUtdG91Y2gtaWNvblwiO1xuICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChhcHBsZVRvdWNoTGluayk7XG4gICAgfVxuICAgIGFwcGxlVG91Y2hMaW5rLmhyZWYgPSBhcHBsZVRvdWNoO1xuICB9LCBbYXBwbGVUb3VjaF0pO1xufVxuIiwiaW1wb3J0IHsgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VJY29GYXZpY29uKFxuICBpY286IHN0cmluZywgLy8gMzJ4MzJcbik6IHZvaWQge1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIFF1ZXJ5IGZvciB0aGUgaWNvIGxpbmtcbiAgICBjb25zdCBpY29RdWVyeSA9ICdsaW5rW3JlbD1cImljb25cIl06bm90KFt0eXBlPVwiaW1hZ2Uvc3ZnK3htbFwiXSknO1xuICAgIGxldCBpY29MaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MTGlua0VsZW1lbnQ+KGljb1F1ZXJ5KTtcbiAgICBpZiAoIWljb0xpbmspIHtcbiAgICAgIGljb0xpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcbiAgICAgIGljb0xpbmsucmVsID0gXCJpY29uXCI7XG4gICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGljb0xpbmspO1xuICAgIH1cblxuICAgIGljb0xpbmsuaHJlZiA9IGljbztcbiAgfSwgW2ljb10pO1xufVxuIiwiaW1wb3J0IHsgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VTdmdGYXZpY29uKHN2Zzogc3RyaW5nIHwgU1ZHRWxlbWVudCk6IHZvaWQge1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIFF1ZXJ5IGZvciB0aGUgU1ZHIGljb24gbGlua1xuICAgIGNvbnN0IHN2Z1F1ZXJ5ID0gJ2xpbmtbcmVsPVwiaWNvblwiXVt0eXBlPVwiaW1hZ2Uvc3ZnK3htbFwiXSc7XG4gICAgbGV0IHN2Z0xpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxMaW5rRWxlbWVudD4oc3ZnUXVlcnkpO1xuXG4gICAgaWYgKCFzdmdMaW5rKSB7XG4gICAgICBzdmdMaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XG4gICAgICBzdmdMaW5rLnR5cGUgPSBcImltYWdlL3N2Zyt4bWxcIjtcbiAgICAgIHN2Z0xpbmsucmVsID0gXCJpY29uXCI7XG4gICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN2Z0xpbmspO1xuICAgIH1cblxuICAgIGlmIChzdmcgaW5zdGFuY2VvZiBTVkdFbGVtZW50KSB7XG4gICAgICBzdmdMaW5rLmhyZWYgPSBcImRhdGE6aW1hZ2Uvc3ZnK3htbDt1dGY4LFwiICsgc3ZnO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdmdMaW5rLmhyZWYgPSBzdmc7XG4gICAgfVxuICB9LCBbc3ZnXSk7XG59XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBBc3luY1Jlc3VsdCwgQXdhaXRpbmcsIEZhaWx1cmUsIFN1Y2Nlc3MgfSBmcm9tIFwiQHRhY3RpY3MvanMtbW9uYWRcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUNvcHlUb0NsaXBib2FyZCgpOiBBc3luY1Jlc3VsdDxzdHJpbmc+IHtcbiAgY29uc3QgW2NvcGllZFRleHQsIHNldENvcGllZFRleHRdID0gUmVhY3QudXNlU3RhdGU8QXN5bmNSZXN1bHQ8c3RyaW5nPj4oXG4gICAgbmV3IEF3YWl0aW5nKCksXG4gICk7XG5cbiAgY29uc3QgY29weVRvQ2xpcGJvYXJkID0gUmVhY3QudXNlQ2FsbGJhY2soKHZhbHVlOiBzdHJpbmcpID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZCAmJlxuICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZFxuICAgICAgICAud3JpdGVUZXh0KHZhbHVlKVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgc2V0Q29waWVkVGV4dChTdWNjZXNzLm9mKHZhbHVlKSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyb3I6IERPTUV4Y2VwdGlvbikgPT4ge1xuICAgICAgICAgIHNldENvcGllZFRleHQoRmFpbHVyZS5kdWVUbyhlcnJvci5tZXNzYWdlLCBlcnJvci5uYW1lKSk7XG4gICAgICAgIH0pXG4gICAgKTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiBbY29waWVkVGV4dCwgY29weVRvQ2xpcGJvYXJkXTtcbn1cbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IEFzeW5jUmVzdWx0LCBBd2FpdGluZywgRmFpbHVyZSwgU3VjY2VzcyB9IGZyb20gXCJAdGFjdGljcy9qcy1tb25hZFwiO1xuXG5pbnRlcmZhY2UgR2VvbG9jYXRpb25TdGF0ZSB7XG4gIGFjY3VyYWN5OiBudW1iZXIgfCBudWxsO1xuICBhbHRpdHVkZTogbnVtYmVyIHwgbnVsbDtcbiAgYWx0aXR1ZGVBY2N1cmFjeTogbnVtYmVyIHwgbnVsbDtcbiAgaGVhZGluZzogbnVtYmVyIHwgbnVsbDtcbiAgbGF0aXR1ZGU6IG51bWJlciB8IG51bGw7XG4gIGxvbmdpdHVkZTogbnVtYmVyIHwgbnVsbDtcbiAgc3BlZWQ6IG51bWJlciB8IG51bGw7XG4gIHRpbWVzdGFtcDogbnVtYmVyIHwgbnVsbDtcbn1cblxuaW50ZXJmYWNlIEdlb2xvY2F0aW9uT3B0aW9ucyB7XG4gIGVuYWJsZUhpZ2hBY2N1cmFjeT86IGJvb2xlYW47XG4gIHRpbWVvdXQ/OiBudW1iZXI7XG4gIG1heGltdW1BZ2U/OiBudW1iZXI7XG59XG5cbmludGVyZmFjZSBQb3NpdGlvbiB7XG4gIGNvb3Jkczoge1xuICAgIGxhdGl0dWRlOiBudW1iZXI7XG4gICAgbG9uZ2l0dWRlOiBudW1iZXI7XG4gICAgYWNjdXJhY3k6IG51bWJlcjtcbiAgICBhbHRpdHVkZTogbnVtYmVyIHwgbnVsbDtcbiAgICBhbHRpdHVkZUFjY3VyYWN5OiBudW1iZXIgfCBudWxsO1xuICAgIGhlYWRpbmc6IG51bWJlciB8IG51bGw7XG4gICAgc3BlZWQ6IG51bWJlciB8IG51bGw7XG4gIH07XG4gIHRpbWVzdGFtcDogbnVtYmVyO1xufVxuXG5pbnRlcmZhY2UgUG9zaXRpb25FcnJvciB7XG4gIGNvZGU6IG51bWJlcjtcbiAgbWVzc2FnZTogc3RyaW5nO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlR2VvbG9jYXRpb24oXG4gIG9wdGlvbnM6IEdlb2xvY2F0aW9uT3B0aW9ucyA9IHt9LFxuKTogQXN5bmNSZXN1bHQ8R2VvbG9jYXRpb25TdGF0ZT4ge1xuICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IFJlYWN0LnVzZVN0YXRlPEFzeW5jUmVzdWx0PEdlb2xvY2F0aW9uU3RhdGU+PihcbiAgICBuZXcgQXdhaXRpbmcoKSxcbiAgKTtcbiAgY29uc3Qgb3B0aW9uc1JlZiA9IFJlYWN0LnVzZVJlZjxHZW9sb2NhdGlvbk9wdGlvbnM+KG9wdGlvbnMpO1xuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3Qgb25FdmVudCA9ICh7IGNvb3JkcywgdGltZXN0YW1wIH06IFBvc2l0aW9uKSA9PiB7XG4gICAgICBzZXRTdGF0ZShcbiAgICAgICAgU3VjY2Vzcy5vZih7XG4gICAgICAgICAgdGltZXN0YW1wLFxuICAgICAgICAgIGxhdGl0dWRlOiBjb29yZHMubGF0aXR1ZGUsXG4gICAgICAgICAgbG9uZ2l0dWRlOiBjb29yZHMubG9uZ2l0dWRlLFxuICAgICAgICAgIGFsdGl0dWRlOiBjb29yZHMuYWx0aXR1ZGUsXG4gICAgICAgICAgYWNjdXJhY3k6IGNvb3Jkcy5hY2N1cmFjeSxcbiAgICAgICAgICBhbHRpdHVkZUFjY3VyYWN5OiBjb29yZHMuYWx0aXR1ZGVBY2N1cmFjeSxcbiAgICAgICAgICBoZWFkaW5nOiBjb29yZHMuaGVhZGluZyxcbiAgICAgICAgICBzcGVlZDogY29vcmRzLnNwZWVkLFxuICAgICAgICB9KSxcbiAgICAgICk7XG4gICAgfTtcblxuICAgIGNvbnN0IG9uRXZlbnRFcnJvciA9IChlcnJvcjogUG9zaXRpb25FcnJvcikgPT4ge1xuICAgICAgc2V0U3RhdGUoRmFpbHVyZS5kdWVUbyhlcnJvci5tZXNzYWdlLCBTdHJpbmcoZXJyb3IuY29kZSkpKTtcbiAgICB9O1xuXG4gICAgY29uc3QgeyBlbmFibGVIaWdoQWNjdXJhY3ksIHRpbWVvdXQsIG1heGltdW1BZ2UgfSA9IG9wdGlvbnNSZWYuY3VycmVudDtcblxuICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24ob25FdmVudCwgb25FdmVudEVycm9yLCB7XG4gICAgICBlbmFibGVIaWdoQWNjdXJhY3ksXG4gICAgICB0aW1lb3V0LFxuICAgICAgbWF4aW11bUFnZSxcbiAgICB9KTtcblxuICAgIGNvbnN0IHdhdGNoSWQgPSBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24ud2F0Y2hQb3NpdGlvbihvbkV2ZW50LCBvbkV2ZW50RXJyb3IsIHtcbiAgICAgIGVuYWJsZUhpZ2hBY2N1cmFjeSxcbiAgICAgIHRpbWVvdXQsXG4gICAgICBtYXhpbXVtQWdlLFxuICAgIH0pO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5jbGVhcldhdGNoKHdhdGNoSWQpO1xuICAgIH07XG4gIH0sIFtdKTtcblxuICByZXR1cm4gc3RhdGU7XG59XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VJZGxlKG1zOiBudW1iZXIgPSAxMDAwICogNjApOiBib29sZWFuIHtcbiAgY29uc3QgW2lkbGUsIHNldElkbGVdID0gUmVhY3QudXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpO1xuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGV0IHRpbWVvdXRJZDogbnVtYmVyO1xuXG4gICAgY29uc3QgaGFuZGxlVGltZW91dCA9ICgpID0+IHtcbiAgICAgIHNldElkbGUodHJ1ZSk7XG4gICAgfTtcblxuICAgIGNvbnN0IGhhbmRsZUV2ZW50ID0gdGhyb3R0bGUoKGU6IEV2ZW50KSA9PiB7XG4gICAgICBzZXRJZGxlKGZhbHNlKTtcblxuICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgICAgdGltZW91dElkID0gd2luZG93LnNldFRpbWVvdXQoaGFuZGxlVGltZW91dCwgbXMpO1xuICAgIH0sIDUwMCk7XG5cbiAgICBjb25zdCBoYW5kbGVWaXNpYmlsaXR5Q2hhbmdlID0gKCkgPT4ge1xuICAgICAgaWYgKCFkb2N1bWVudC5oaWRkZW4pIHtcbiAgICAgICAgaGFuZGxlRXZlbnQoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGltZW91dElkID0gd2luZG93LnNldFRpbWVvdXQoaGFuZGxlVGltZW91dCwgbXMpO1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgaGFuZGxlRXZlbnQpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGhhbmRsZUV2ZW50KTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBoYW5kbGVFdmVudCk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUV2ZW50KTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgaGFuZGxlRXZlbnQpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwid2hlZWxcIiwgaGFuZGxlRXZlbnQpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIGhhbmRsZVZpc2liaWxpdHlDaGFuZ2UpO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIGhhbmRsZUV2ZW50KTtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGhhbmRsZUV2ZW50KTtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGhhbmRsZUV2ZW50KTtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVFdmVudCk7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgaGFuZGxlRXZlbnQpO1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ3aGVlbFwiLCBoYW5kbGVFdmVudCk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCBoYW5kbGVWaXNpYmlsaXR5Q2hhbmdlKTtcbiAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICB9O1xuICB9LCBbbXNdKTtcblxuICByZXR1cm4gaWRsZTtcbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIHRocm90dGxlIGV2ZW50c1xuZnVuY3Rpb24gdGhyb3R0bGUoZnVuYzogRnVuY3Rpb24sIGxpbWl0OiBudW1iZXIpIHtcbiAgbGV0IGluVGhyb3R0bGU6IGJvb2xlYW47XG4gIHJldHVybiBmdW5jdGlvbiAodGhpczogYW55LCAuLi5hcmdzOiBhbnlbXSkge1xuICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzO1xuICAgIGlmICghaW5UaHJvdHRsZSkge1xuICAgICAgZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgIGluVGhyb3R0bGUgPSB0cnVlO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiAoaW5UaHJvdHRsZSA9IGZhbHNlKSwgbGltaXQpO1xuICAgIH1cbiAgfTtcbn1cbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZU1lZGlhUXVlcnkocXVlcnk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICBjb25zdCBzdWJzY3JpYmUgPSBSZWFjdC51c2VDYWxsYmFjayhcbiAgICAoY2FsbGJhY2s6ICh0aGlzOiBNZWRpYVF1ZXJ5TGlzdCwgZXY6IE1lZGlhUXVlcnlMaXN0RXZlbnQpID0+IGFueSkgPT4ge1xuICAgICAgY29uc3QgbWF0Y2hNZWRpYSA9IHdpbmRvdy5tYXRjaE1lZGlhKHF1ZXJ5KTtcblxuICAgICAgbWF0Y2hNZWRpYS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGNhbGxiYWNrKTtcbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIG1hdGNoTWVkaWEucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBjYWxsYmFjayk7XG4gICAgICB9O1xuICAgIH0sXG4gICAgW3F1ZXJ5XSxcbiAgKTtcblxuICBjb25zdCBnZXRTbmFwc2hvdCA9ICgpOiBib29sZWFuID0+IHtcbiAgICByZXR1cm4gd2luZG93Lm1hdGNoTWVkaWEocXVlcnkpLm1hdGNoZXM7XG4gIH07XG5cbiAgY29uc3QgZ2V0U2VydmVyU25hcHNob3QgPSAoKTogYm9vbGVhbiA9PiB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwidXNlTWVkaWFRdWVyeSBpcyBhIGNsaWVudC1vbmx5IGhvb2tcIik7XG4gIH07XG5cbiAgcmV0dXJuIFJlYWN0LnVzZVN5bmNFeHRlcm5hbFN0b3JlKHN1YnNjcmliZSwgZ2V0U25hcHNob3QsIGdldFNlcnZlclNuYXBzaG90KTtcbn1cbiIsImltcG9ydCB7IHVzZU1lZGlhUXVlcnkgfSBmcm9tIFwiQC9ob29rcy91c2UtbWVkaWEtcXVlcnlcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZVByZWZlcnNEYXJrTW9kZSgpOiBib29sZWFuIHtcbiAgcmV0dXJuIHVzZU1lZGlhUXVlcnkoXCIocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspXCIpO1xufVxuIiwiaW1wb3J0IHsgdXNlQnJvd3NlckFjY2Vzc2liaWxpdHlQcmVmZXJlbmNlcyB9IGZyb20gXCJAL2hvb2tzL3VzZS1hY2Nlc3NpYmlsaXR5LXByZWZlcmVuY2VzXCI7XG5pbXBvcnQgeyB1c2VNZWRpYVF1ZXJ5IH0gZnJvbSBcIkAvaG9va3MvdXNlLW1lZGlhLXF1ZXJ5XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VQcmVmZXJzSGlnaENvbnRhc3QoKTogYm9vbGVhbiB7XG4gIHJldHVybiB1c2VNZWRpYVF1ZXJ5KFwiKHByZWZlcnMtY29udHJhc3Q6IG1vcmUpXCIpO1xufVxuIiwiaW1wb3J0IHsgdXNlTWVkaWFRdWVyeSB9IGZyb20gXCJAL2hvb2tzL3VzZS1tZWRpYS1xdWVyeVwiO1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlUHJlZmVyc0xvd0NvbnRyYXN0KCk6IGJvb2xlYW4ge1xuICByZXR1cm4gdXNlTWVkaWFRdWVyeShcIihwcmVmZXJzLWNvbnRyYXN0OiBsZXNzKVwiKTtcbn1cbiIsImltcG9ydCB7IHVzZU1lZGlhUXVlcnkgfSBmcm9tIFwiQC9ob29rcy91c2UtbWVkaWEtcXVlcnlcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZVByZWZlcnNSZWR1Y2VkTW90aW9uKCk6IGJvb2xlYW4ge1xuICByZXR1cm4gdXNlTWVkaWFRdWVyeShcIihwcmVmZXJzLXJlZHVjZWQtbW90aW9uOiByZWR1Y2UpXCIpO1xufVxuIiwiaW1wb3J0IHsgdXNlQnJvd3NlckFjY2Vzc2liaWxpdHlQcmVmZXJlbmNlcyB9IGZyb20gXCJAL2hvb2tzL3VzZS1hY2Nlc3NpYmlsaXR5LXByZWZlcmVuY2VzXCI7XG5pbXBvcnQgeyB1c2VNZWRpYVF1ZXJ5IH0gZnJvbSBcIkAvaG9va3MvdXNlLW1lZGlhLXF1ZXJ5XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VQcmVmZXJzUmVkdWNlZFRyYW5zcGFyYW5jeSgpOiBib29sZWFuIHtcbiAgcmV0dXJuIHVzZU1lZGlhUXVlcnkoXCIocHJlZmVycy1yZWR1Y2VkLXRyYW5zcGFyZW5jeTogcmVkdWNlKVwiKTtcbn1cbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IEFzeW5jUmVzdWx0LCBBd2FpdGluZywgU3VjY2VzcywgRmFpbHVyZSB9IGZyb20gXCJAdGFjdGljcy9qcy1tb25hZFwiO1xuXG5pbnRlcmZhY2UgU2NyaXB0T3B0aW9ucyB7XG4gIHJlbW92ZU9uVW5tb3VudD86IGJvb2xlYW47XG59XG5cbnR5cGUgU3VjY2Vzc1Jlc3BvbnNlID0gXCJyZWFkeVwiIHwgXCJleHRlcm5hbFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlU2NyaXB0KFxuICBzcmM6IHN0cmluZyxcbiAgb3B0aW9uczogU2NyaXB0T3B0aW9ucyA9IHt9LFxuKTogQXN5bmNSZXN1bHQ8U3VjY2Vzc1Jlc3BvbnNlPiB7XG4gIGNvbnN0IFtzdGF0dXMsIHNldFN0YXR1c10gPSBSZWFjdC51c2VTdGF0ZTxBc3luY1Jlc3VsdDxib29sZWFuPj4oXG4gICAgbmV3IEF3YWl0aW5nKCksXG4gICk7XG4gIGNvbnN0IG9wdGlvbnNSZWYgPSBSZWFjdC51c2VSZWY8U2NyaXB0T3B0aW9ucz4ob3B0aW9ucyk7XG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBsZXQgc2NyaXB0OiBIVE1MU2NyaXB0RWxlbWVudCB8IG51bGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYHNjcmlwdFtzcmM9XCIke3NyY31cIl1gLFxuICAgICk7XG5cbiAgICBpZiAoc2NyaXB0KSB7XG4gICAgICAvLyBXaGVuIHN0YXR1cyBpcyBudWxsLCBhIHNjcmlwdCBpcyBleHRlcm5hbGx5IGFkZGVkIG91dHNpZGUgb2YgdGhpcyBmdW5jdGlvbiwgd2UgYXNzdW1lIHN1Y2Nlc3MgYW5kIG1hcmsgaXQgYXMgZXh0ZXJuYWxcbiAgICAgIGNvbnN0IGRvbVN0YXR1cyA9IHNjcmlwdC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXN0YXR1c1wiKTtcbiAgICAgIHN3aXRjaCAoZG9tU3RhdHVzKSB7XG4gICAgICAgIGNhc2UgXCJyZWFkeVwiOlxuICAgICAgICAgIHNldFN0YXR1cyhTdWNjZXNzLm9mKFwicmVhZHlcIikpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiZXJyb3JcIjpcbiAgICAgICAgICBzZXRTdGF0dXMoRmFpbHVyZS5kdWVUbyhgRmFpbGVkIHRvIGxvYWQgc2NyaXB0OiAke3NyY31gLCBcImVycm9yXCIpKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBzZXRTdGF0dXMoU3VjY2Vzcy5vZihcImV4dGVybmFsXCIpKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiAgICAgIGlmIChzY3JpcHQpIHtcbiAgICAgICAgc2NyaXB0LnNyYyA9IHNyYztcbiAgICAgICAgc2NyaXB0LmFzeW5jID0gdHJ1ZTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpO1xuXG4gICAgICAgIGNvbnN0IGhhbmRsZVNjcmlwdExvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgc2NyaXB0Py5zZXRBdHRyaWJ1dGUoXCJkYXRhLXN0YXR1c1wiLCBcInJlYWR5XCIpO1xuICAgICAgICAgIHNldFN0YXR1cyhTdWNjZXNzLm9mKHRydWUpKTtcbiAgICAgICAgICBjbGVhbnVwTGlzdGVuZXJzKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgaGFuZGxlU2NyaXB0RXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgc2NyaXB0Py5zZXRBdHRyaWJ1dGUoXCJkYXRhLXN0YXR1c1wiLCBcImVycm9yXCIpO1xuICAgICAgICAgIHNldFN0YXR1cyhGYWlsdXJlLmR1ZVRvKGBGYWlsZWQgdG8gbG9hZCBzY3JpcHQ6ICR7c3JjfWAsIFwiZXJyb3JcIikpO1xuICAgICAgICAgIGNsZWFudXBMaXN0ZW5lcnMoKTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBjbGVhbnVwTGlzdGVuZXJzID0gKCkgPT4ge1xuICAgICAgICAgIHNjcmlwdD8ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgaGFuZGxlU2NyaXB0TG9hZCk7XG4gICAgICAgICAgc2NyaXB0Py5yZW1vdmVFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgaGFuZGxlU2NyaXB0RXJyb3IpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHNjcmlwdC5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBoYW5kbGVTY3JpcHRMb2FkKTtcbiAgICAgICAgc2NyaXB0LmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCBoYW5kbGVTY3JpcHRFcnJvcik7XG5cbiAgICAgICAgY29uc3QgcmVtb3ZlT25Vbm1vdW50ID0gb3B0aW9uc1JlZi5jdXJyZW50LnJlbW92ZU9uVW5tb3VudDtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICBpZiAocmVtb3ZlT25Vbm1vdW50ID09PSB0cnVlKSB7XG4gICAgICAgICAgICBzY3JpcHQ/LnJlbW92ZSgpO1xuICAgICAgICAgICAgY2xlYW51cExpc3RlbmVycygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldFN0YXR1cyhcbiAgICAgICAgICBGYWlsdXJlLmR1ZVRvKGBGYWlsZWQgdG8gYWRkIHNjcmlwdCB0YWcgZm9yIDogJHtzcmN9YCwgXCJlcnJvclwiKSxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtzcmNdKTtcblxuICByZXR1cm4gc3RhdHVzO1xufVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgUmVzdWx0IH0gZnJvbSBcIkB0YWN0aWNzL2pzLW1vbmFkXCI7XG5pbXBvcnQge1xuICBnZXRTdG9yYWdlSXRlbSxcbiAgZ2V0U3RvcmFnZVNlcnZlclNuYXBzaG90LFxuICByZW1vdmVTdG9yYWdlSXRlbSxcbiAgc2V0U3RvcmFnZUl0ZW0sXG4gIHVzZVN0b3JhZ2VTdWJzY3JpYmUsXG59IGZyb20gXCJAL3N0b3JhZ2Uvc3RvcmFnZVwiO1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlU3RvcmFnZTxUPihcbiAga2V5OiBzdHJpbmcsXG4gIGluaXRpYWxWYWx1ZTogVCxcbiAgc3RvcmFnZUFyZWE6IFN0b3JhZ2UsXG4pOiBbUmVzdWx0PFQ+LCAodmFsdWU6IFJlYWN0LlNldFN0YXRlQWN0aW9uPFQ+KSA9PiB2b2lkLCAoKSA9PiB2b2lkXSB7XG4gIGNvbnN0IGdldFNuYXBzaG90ID0gKCkgPT4gZ2V0U3RvcmFnZUl0ZW08VD4oa2V5LCBzdG9yYWdlQXJlYSk7XG4gIGNvbnN0IHN0b3JlZCA9IFJlYWN0LnVzZVN5bmNFeHRlcm5hbFN0b3JlKFxuICAgIHVzZVN0b3JhZ2VTdWJzY3JpYmUsXG4gICAgZ2V0U25hcHNob3QsXG4gICAgZ2V0U3RvcmFnZVNlcnZlclNuYXBzaG90LFxuICApO1xuXG4gIGNvbnN0IHNldCA9IFJlYWN0LnVzZUNhbGxiYWNrKFxuICAgICh2YWx1ZTogUmVhY3QuU2V0U3RhdGVBY3Rpb248VD4pID0+IHtcbiAgICAgIGNvbnN0IG5leHRTdGF0ZSA9IHZhbHVlO1xuICAgICAgaWYgKG5leHRTdGF0ZSA9PT0gbnVsbCkge1xuICAgICAgICByZW1vdmVTdG9yYWdlSXRlbShrZXksIHN0b3JhZ2VBcmVhKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldFN0b3JhZ2VJdGVtKGtleSwgbmV4dFN0YXRlLCBzdG9yYWdlQXJlYSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBba2V5LCBzdG9yZWRdLFxuICApO1xuXG4gIGNvbnN0IGNsZWFyID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHJlbW92ZVN0b3JhZ2VJdGVtKGtleSwgc3RvcmFnZUFyZWEpO1xuICB9LCBba2V5LCBzdG9yZWRdKTtcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldFN0b3JhZ2VJdGVtKGtleSwgaW5pdGlhbFZhbHVlLCBzdG9yYWdlQXJlYSk7XG4gIH0sIFtrZXksIGluaXRpYWxWYWx1ZV0pO1xuXG4gIHJldHVybiBbc3RvcmVkLCBzZXQsIGNsZWFyXTtcbn1cbiIsImltcG9ydCB7IEZhaWx1cmUsIFJlc3VsdCwgU3VjY2VzcyB9IGZyb20gXCJAdGFjdGljcy9qcy1tb25hZFwiO1xuXG5leHBvcnQgY29uc3QgZW51bSBTdG9yYWdlRmFpbHVyZXMge1xuICBOT1RfQVZBSUxBQkxFID0gXCJOT1RfQVZBSUxBQkxFXCIsXG4gIElOVkFMSURfRk9STUFUID0gXCJJTlZBTElEX0ZPUk1BVFwiLFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGlzcGF0Y2hTdG9yYWdlRXZlbnQoXG4gIGtleTogc3RyaW5nLFxuICBuZXdWYWx1ZTogYW55LFxuICBvbGRWYWx1ZTogYW55LFxuICBzdG9yYWdlQXJlYTogU3RvcmFnZSxcbikge1xuICB3aW5kb3cuZGlzcGF0Y2hFdmVudChcbiAgICBuZXcgU3RvcmFnZUV2ZW50KFwic3RvcmFnZVwiLCB7IGtleSwgbmV3VmFsdWUsIG9sZFZhbHVlLCBzdG9yYWdlQXJlYSB9KSxcbiAgKTtcbn1cblxuZXhwb3J0IGNvbnN0IHVzZVN0b3JhZ2VTdWJzY3JpYmUgPSAoXG4gIGNhbGxiYWNrOiAoZXZlbnQ6IFN0b3JhZ2VFdmVudCkgPT4gdm9pZCxcbikgPT4ge1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInN0b3JhZ2VcIiwgY2FsbGJhY2spO1xuICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdG9yYWdlXCIsIGNhbGxiYWNrKTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRTdG9yYWdlU2VydmVyU25hcHNob3QgPSAoKSA9PiB7XG4gIHRocm93IEVycm9yKFwidGhpcyBpcyBhIGNsaWVudC1vbmx5IGhvb2tcIik7XG59O1xuXG4vLyBIZWxwZXIgZnVuY3Rpb25zIHRvIGludGVyYWN0IHdpdGggc2Vzc2lvblN0b3JhZ2VcbmV4cG9ydCBmdW5jdGlvbiBnZXRTdG9yYWdlSXRlbTxUPihcbiAga2V5OiBzdHJpbmcsXG4gIHN0b3JhZ2VBcmVhOiBTdG9yYWdlLFxuKTogUmVzdWx0PFQ+IHtcbiAgY29uc3QgaXRlbSA9IHN0b3JhZ2VBcmVhLmdldEl0ZW0oa2V5KTtcbiAgaWYgKCFpdGVtKSB7XG4gICAgcmV0dXJuIEZhaWx1cmUuZHVlVG8oXG4gICAgICBgJHtrZXl9IGlzIG5vdCBhdmFpbGFibGUgaW4gJHtzdG9yYWdlQXJlYX0gc3RvcmFnZWAsXG4gICAgICBTdG9yYWdlRmFpbHVyZXMuTk9UX0FWQUlMQUJMRSxcbiAgICApO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBvYmplY3QgPSBKU09OLnBhcnNlKGl0ZW0pO1xuICAgIHJldHVybiBTdWNjZXNzLm9mKG9iamVjdCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIEZhaWx1cmUuZHVlVG8oXG4gICAgICBgJHtrZXl9IGhhcyBpbnZhbGlkIGZvcm1hdCBpbiBzdG9yYWdlYCxcbiAgICAgIFN0b3JhZ2VGYWlsdXJlcy5JTlZBTElEX0ZPUk1BVCxcbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRTdG9yYWdlSXRlbTxUPihcbiAga2V5OiBzdHJpbmcsXG4gIHZhbHVlOiBULFxuICBzdG9yYWdlQXJlYTogU3RvcmFnZSxcbik6IFJlc3VsdDxUPiB7XG4gIGNvbnN0IGN1cnJlbnRJdGVtID0gZ2V0U3RvcmFnZUl0ZW0oa2V5LCBzdG9yYWdlQXJlYSk7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBpdGVtID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICAgIHN0b3JhZ2VBcmVhLnNldEl0ZW0oa2V5LCBpdGVtKTtcbiAgICBkaXNwYXRjaFN0b3JhZ2VFdmVudChcbiAgICAgIGtleSxcbiAgICAgIHZhbHVlLFxuICAgICAgY3VycmVudEl0ZW0gaW5zdGFuY2VvZiBGYWlsdXJlID8gbnVsbCA6IGN1cnJlbnRJdGVtLnVud3JhcCgpLFxuICAgICAgc3RvcmFnZUFyZWEsXG4gICAgKTtcbiAgICByZXR1cm4gU3VjY2Vzcy5vZih2YWx1ZSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIEZhaWx1cmUuZHVlVG8oXG4gICAgICBgJHt2YWx1ZX0gaGFzIGludmFsaWQgZm9ybWF0IHRvIHB1dCBpbnRvIHN0b3JhZ2VgLFxuICAgICAgU3RvcmFnZUZhaWx1cmVzLklOVkFMSURfRk9STUFULFxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVN0b3JhZ2VJdGVtKFxuICBrZXk6IHN0cmluZyxcbiAgc3RvcmFnZUFyZWE6IFN0b3JhZ2UsXG4pOiBSZXN1bHQ8c3RyaW5nPiB7XG4gIGNvbnN0IGN1cnJlbnRJdGVtID0gZ2V0U3RvcmFnZUl0ZW0oa2V5LCBzdG9yYWdlQXJlYSk7XG4gIGlmIChjdXJyZW50SXRlbSBpbnN0YW5jZW9mIEZhaWx1cmUpIHtcbiAgICBzdG9yYWdlQXJlYS5yZW1vdmVJdGVtKGtleSk7XG4gICAgcmV0dXJuIFN1Y2Nlc3Mub2Yoa2V5KTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgc3RvcmFnZUFyZWEucmVtb3ZlSXRlbShrZXkpO1xuICAgIGRpc3BhdGNoU3RvcmFnZUV2ZW50KGtleSwgbnVsbCwgY3VycmVudEl0ZW0udW53cmFwKCksIHN0b3JhZ2VBcmVhKTtcbiAgICByZXR1cm4gU3VjY2Vzcy5vZihrZXkpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiBGYWlsdXJlLmR1ZVRvKFxuICAgICAgYCR7a2V5fSBjb3VsZCBub3QgYmUgcmVtb3ZlZCBmcm9tIHN0b3JhZ2VgLFxuICAgICAgU3RvcmFnZUZhaWx1cmVzLklOVkFMSURfRk9STUFULFxuICAgICk7XG4gIH1cbn1cbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcblxuZXhwb3J0IGludGVyZmFjZSBTY3JvbGxTdGF0ZSB7XG4gIHg6IG51bWJlcjtcbiAgeTogbnVtYmVyO1xufVxuXG5leHBvcnQgdHlwZSBTY3JvbGxUb0FyZ3MgPSBbb3B0aW9uczogU2Nyb2xsVG9PcHRpb25zXSB8IFt4OiBudW1iZXIsIHk6IG51bWJlcl07XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VXaW5kb3dTY3JvbGwoKTogW1xuICBTY3JvbGxTdGF0ZSxcbiAgKC4uLmFyZ3M6IFNjcm9sbFRvQXJncykgPT4gdm9pZCxcbl0ge1xuICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IFJlYWN0LnVzZVN0YXRlPFNjcm9sbFN0YXRlPih7XG4gICAgeDogMCxcbiAgICB5OiAwLFxuICB9KTtcblxuICBjb25zdCBzY3JvbGxUbyA9IFJlYWN0LnVzZUNhbGxiYWNrKCguLi5hcmdzOiBTY3JvbGxUb0FyZ3MpID0+IHtcbiAgICBpZiAodHlwZW9mIGFyZ3NbMF0gPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHdpbmRvdy5zY3JvbGxUbyhhcmdzWzBdKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBhcmdzWzBdID09PSBcIm51bWJlclwiICYmIHR5cGVvZiBhcmdzWzFdID09PSBcIm51bWJlclwiKSB7XG4gICAgICB3aW5kb3cuc2Nyb2xsVG8oYXJnc1swXSwgYXJnc1sxXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYEludmFsaWQgYXJndW1lbnRzIHBhc3NlZCB0byBzY3JvbGxUby4gU2VlIGhlcmUgZm9yIG1vcmUgaW5mbzogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1dpbmRvdy9zY3JvbGxUb2AsXG4gICAgICApO1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIFJlYWN0LnVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlU2Nyb2xsID0gKCkgPT4ge1xuICAgICAgc2V0U3RhdGUoeyB4OiB3aW5kb3cuc2Nyb2xsWCwgeTogd2luZG93LnNjcm9sbFkgfSk7XG4gICAgfTtcblxuICAgIGhhbmRsZVNjcm9sbCgpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIGhhbmRsZVNjcm9sbCk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgaGFuZGxlU2Nyb2xsKTtcbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgcmV0dXJuIFtzdGF0ZSwgc2Nyb2xsVG9dO1xufVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIFdpbmRvd1NpemUge1xuICB3aWR0aDogbnVtYmVyO1xuICBoZWlnaHQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZVdpbmRvd1NpemUoKTogV2luZG93U2l6ZSB7XG4gIGNvbnN0IFtzaXplLCBzZXRTaXplXSA9IFJlYWN0LnVzZVN0YXRlPFdpbmRvd1NpemU+KHtcbiAgICB3aWR0aDogMCxcbiAgICBoZWlnaHQ6IDAsXG4gIH0pO1xuXG4gIFJlYWN0LnVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlUmVzaXplID0gKCkgPT4ge1xuICAgICAgc2V0U2l6ZSh7XG4gICAgICAgIHdpZHRoOiB3aW5kb3cuaW5uZXJXaWR0aCxcbiAgICAgICAgaGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHQsXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgaGFuZGxlUmVzaXplKCk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgaGFuZGxlUmVzaXplKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBoYW5kbGVSZXNpemUpO1xuICAgIH07XG4gIH0sIFtdKTtcblxuICByZXR1cm4gc2l6ZTtcbn1cbiIsImV4cG9ydCBjbGFzcyBCcm93c2VyQWNjZXNzaWJpbGl0eVByZWZlcmVuY2VzIHtcbiAgcmVhZG9ubHkgcmVkdWNlZE1vdGlvbjogYm9vbGVhbjtcbiAgcmVhZG9ubHkgaGlnaENvbnRyYXN0OiBib29sZWFuO1xuICByZWFkb25seSBsb3dDb250cmFzdDogYm9vbGVhbjtcbiAgcmVhZG9ubHkgcmVkdWNlZFRyYW5zcGFyZW5jeTogYm9vbGVhbjtcbiAgcmVhZG9ubHkgZGFya01vZGU6IGJvb2xlYW47XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcmVkdWNlZE1vdGlvbjogYm9vbGVhbixcbiAgICBoaWdoQ29udHJhc3Q6IGJvb2xlYW4sXG4gICAgbG93Q29udHJhc3Q6IGJvb2xlYW4sXG4gICAgcmVkdWNlZFRyYW5zcGFyZW5jeTogYm9vbGVhbixcbiAgICBkYXJrTW9kZTogYm9vbGVhbixcbiAgKSB7XG4gICAgdGhpcy5yZWR1Y2VkTW90aW9uID0gcmVkdWNlZE1vdGlvbjtcbiAgICB0aGlzLmhpZ2hDb250cmFzdCA9IGhpZ2hDb250cmFzdDtcbiAgICB0aGlzLmxvd0NvbnRyYXN0ID0gbG93Q29udHJhc3Q7XG4gICAgdGhpcy5yZWR1Y2VkVHJhbnNwYXJlbmN5ID0gcmVkdWNlZFRyYW5zcGFyZW5jeTtcbiAgICB0aGlzLmRhcmtNb2RlID0gZGFya01vZGU7XG4gIH1cblxuICBwcmVmZXJzRGFya01vZGUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZGFya01vZGU7XG4gIH1cblxuICBwcmVmZXJzSGlnaENvbnRyYXN0KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmhpZ2hDb250cmFzdDtcbiAgfVxuXG4gIHByZWZlcnNMb3dDb250cmFzdCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5sb3dDb250cmFzdDtcbiAgfVxuXG4gIHByZWZlcnNSZWR1Y2VkTW90aW9uKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnJlZHVjZWRNb3Rpb247XG4gIH1cblxuICBwcmVmZXJzVHJhbnNwYXJlbmN5KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnJlZHVjZWRUcmFuc3BhcmVuY3k7XG4gIH1cbn1cbiIsImltcG9ydCB7IEJyb3dzZXJBY2Nlc3NpYmlsaXR5UHJlZmVyZW5jZXMgfSBmcm9tIFwiQC9hY2Nlc3NpYmlsaXR5L3ByZWZlcmVuY2VzXCI7XG5pbXBvcnQgeyB1c2VNZWRpYVF1ZXJ5IH0gZnJvbSBcIkAvaG9va3MvdXNlLW1lZGlhLXF1ZXJ5XCI7XG5pbXBvcnQgeyB1c2VQcmVmZXJzUmVkdWNlZE1vdGlvbiB9IGZyb20gXCJAL2hvb2tzL3VzZS1wcmVmZXJzLXJlZHVjZWQtbW90aW9uXCI7XG5pbXBvcnQgeyB1c2VQcmVmZXJzTG93Q29udHJhc3QgfSBmcm9tIFwiQC9ob29rcy91c2UtcHJlZmVycy1sb3ctY29udHJhc3RcIjtcbmltcG9ydCB7IHVzZVByZWZlcnNIaWdoQ29udGFzdCB9IGZyb20gXCJAL2hvb2tzL3VzZS1wcmVmZXJzLWhpZ2gtY29udGFzdFwiO1xuaW1wb3J0IHsgdXNlUHJlZmVyc1JlZHVjZWRUcmFuc3BhcmFuY3kgfSBmcm9tIFwiQC9ob29rcy91c2UtcHJlZmVycy1yZWR1Y2VkLXRyYW5zcGFyYW5jeVwiO1xuaW1wb3J0IHsgdXNlUHJlZmVyc0RhcmtNb2RlIH0gZnJvbSBcIkAvaG9va3MvdXNlLXByZWZlcnMtZGFyay1tb2RlXCI7XG5cbmNvbnN0IHVzZUJyb3dzZXJBY2Nlc3NpYmlsaXR5UHJlZmVyZW5jZXMgPVxuICAoKTogQnJvd3NlckFjY2Vzc2liaWxpdHlQcmVmZXJlbmNlcyA9PiB7XG4gICAgY29uc3QgaGFzUmVkdWNlZE1vdGlvbiA9IHVzZVByZWZlcnNSZWR1Y2VkTW90aW9uKCk7XG4gICAgY29uc3QgaGFzSGlnaENvbnRyYXN0ID0gdXNlUHJlZmVyc0hpZ2hDb250YXN0KCk7XG4gICAgY29uc3QgaGFzTG93Q29udHJhc3QgPSB1c2VQcmVmZXJzTG93Q29udHJhc3QoKTtcbiAgICBjb25zdCBoYXNSZWR1Y2VkVHJhbnNwYXJlbmN5ID0gdXNlUHJlZmVyc1JlZHVjZWRUcmFuc3BhcmFuY3koKTtcbiAgICBjb25zdCBoYXNEYXJrTW9kZSA9IHVzZVByZWZlcnNEYXJrTW9kZSgpO1xuXG4gICAgcmV0dXJuIG5ldyBCcm93c2VyQWNjZXNzaWJpbGl0eVByZWZlcmVuY2VzKFxuICAgICAgaGFzUmVkdWNlZE1vdGlvbixcbiAgICAgIGhhc0hpZ2hDb250cmFzdCxcbiAgICAgIGhhc0xvd0NvbnRyYXN0LFxuICAgICAgaGFzUmVkdWNlZFRyYW5zcGFyZW5jeSxcbiAgICAgIGhhc0RhcmtNb2RlLFxuICAgICk7XG4gIH07XG5cbmV4cG9ydCB7IHVzZUJyb3dzZXJBY2Nlc3NpYmlsaXR5UHJlZmVyZW5jZXMgfTtcbiJdfQ==