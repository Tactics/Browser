'use strict';

var S = require('react');
var ue = require('use-keyboard-shortcut');
var f = require('js-cookie');
var jsMonad = require('@tactics/js-monad');

function _interopDefault (e) { return e && e.__esModule ? e : { default: e }; }

var S__default = /*#__PURE__*/_interopDefault(S);
var ue__default = /*#__PURE__*/_interopDefault(ue);
var f__default = /*#__PURE__*/_interopDefault(f);

function X(e,o){let[t,r]=S.useState(e);return S.useEffect(()=>{let s=setTimeout(()=>{r(e);},o);return ()=>{clearTimeout(s);}},[e,o]),t}function y(e,o=500){let[t,r]=S.useState(e),s=S.useRef(null);return S.useEffect(()=>{let n=Date.now();if(s.current&&n>=s.current+o)s.current=n,r(e);else {let i=window.setTimeout(()=>{s.current=n,r(e);},o);return ()=>window.clearTimeout(i)}},[e,o]),t}function a(e,o,t=window){let r=S.useRef(o);S.useEffect(()=>{r.current=o;},[o]),S.useEffect(()=>{if(!t)return;let s=n=>r.current(n);return t.addEventListener(e,s),()=>{t.removeEventListener(e,s);}},[e,t]);}function se(){let[e,o]=S.useState({width:0,height:0}),t=S.useCallback(()=>{o({width:window.innerWidth||0,height:window.innerHeight||0});},[]);return S.useEffect(()=>{t();},[t]),a("resize",()=>t,window),a("orientationchange",()=>t,window),e}function ce(e,o,t){S.useEffect(()=>{let{flushHeldKeys:r}=ue__default.default(e,o,t);r();},[e,o,t]);}function ae(){let[e,o]=S__default.default.useState({width:0,height:0}),t=S__default.default.useRef(null);return [S__default.default.useCallback(s=>{if(t.current&&(t.current.disconnect(),t.current=null),s.nodeType===Node.ELEMENT_NODE){let n=new ResizeObserver(([i])=>{if(i&&i.borderBoxSize){let{inlineSize:u,blockSize:c}=i.borderBoxSize[0];o({width:u,height:c});}});n.observe(s),t.current=n;}},[]),e]}function B(e){return "clientX"in e}function G(e){return "touches"in e}function le(e,o={}){let{threshold:t=400,onStart:r,onFinish:s,onCancel:n}=o,i=S__default.default.useRef(!1),u=S__default.default.useRef(!1),c=S__default.default.useRef();return S__default.default.useMemo(()=>{if(typeof e!="function")return {};let p=d=>{!B(d)&&!G(d)||(r&&r(d),u.current=!0,c.current=window.setTimeout(()=>{e(d),i.current=!0;},t));},l=d=>{!B(d)&&!G(d)||(i.current?s&&s(d):u.current&&n&&n(d),i.current=!1,u.current=!1,c.current&&window.clearTimeout(c.current));};return {...{onMouseDown:p,onMouseUp:l,onMouseLeave:l},...{onTouchStart:p,onTouchEnd:l}}},[e,t,n,s,r])}var me=e=>(document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e);});function fe(){S.useLayoutEffect(()=>{let e=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=e;}},[]);}function he(e){let[o,t]=S.useState(!1);return e.current&&(a("mouseover",()=>t(!0),e.current),a("mouseout",()=>t(!1),e.current)),o}var x=class{get length(){return Object.keys(f__default.default.get()).length}clear(){let o=f__default.default.get();for(let t in o)f__default.default.remove(t);}getItem(o){let t=f__default.default.get(o);return t!==void 0?t:null}key(o){let t=Object.keys(f__default.default.get());return t.length>o?t[o]:null}removeItem(o){f__default.default.remove(o);}setItem(o,t){f__default.default.set(o,t);}toString(){return JSON.stringify(f__default.default.get(),null,2)}};function Se(e){S__default.default.useEffect(()=>{document.title=e;},[e]);}function T(e){S.useEffect(()=>{let t=document.querySelector('link[rel="apple-touch-icon"]');t||(t=document.createElement("link"),t.rel="apple-touch-icon",document.head.appendChild(t)),t.href=e;},[e]);}function R(e){S.useEffect(()=>{let t=document.querySelector('link[rel="icon"]:not([type="image/svg+xml"])');t||(t=document.createElement("link"),t.rel="icon",document.head.appendChild(t)),t.href=e;},[e]);}function L(e){S.useEffect(()=>{let t=document.querySelector('link[rel="icon"][type="image/svg+xml"]');t||(t=document.createElement("link"),t.type="image/svg+xml",t.rel="icon",document.head.appendChild(t)),e instanceof SVGElement?t.href="data:image/svg+xml;utf8,"+e:t.href=e;},[e]);}function Ee(e,o,t){S.useEffect(()=>{L(e),R(o),T(t);},[e,o,t]);}function Le(){let[e,o]=S__default.default.useState(new jsMonad.Awaiting),t=S__default.default.useCallback(r=>navigator.clipboard&&navigator.clipboard.writeText(r).then(()=>{o(jsMonad.Success.of(r));}).catch(s=>{o(jsMonad.Failure.dueTo(s.message,s.name));}),[]);return [e,t]}function Ce(e={}){let[o,t]=S__default.default.useState(new jsMonad.Awaiting),r=S__default.default.useRef(e);return S__default.default.useEffect(()=>{let s=({coords:l,timestamp:Q})=>{t(jsMonad.Success.of({timestamp:Q,latitude:l.latitude,longitude:l.longitude,altitude:l.altitude,accuracy:l.accuracy,altitudeAccuracy:l.altitudeAccuracy,heading:l.heading,speed:l.speed}));},n=l=>{t(jsMonad.Failure.dueTo(l.message,String(l.code)));},{enableHighAccuracy:i,timeout:u,maximumAge:c}=r.current;navigator.geolocation.getCurrentPosition(s,n,{enableHighAccuracy:i,timeout:u,maximumAge:c});let p=navigator.geolocation.watchPosition(s,n,{enableHighAccuracy:i,timeout:u,maximumAge:c});return ()=>{navigator.geolocation.clearWatch(p);}},[]),o}function Oe(e=1e3*60){let[o,t]=S__default.default.useState(!1);return S__default.default.useEffect(()=>{let r,s=()=>{t(!0);},n=y(u=>{t(!1),window.clearTimeout(r),r=window.setTimeout(s,e);},500),i=u=>{document.hidden||n(u);};r=window.setTimeout(s,e),a("mousemove",n),a("mousedown",n),a("resize",n),a("keydown",n),a("touchstart",n),a("wheel",n),a("visibilitychange",i);},[e]),o}function m(e){let o=S__default.default.useCallback(s=>{let n=window.matchMedia(e);return n.addEventListener("change",s),()=>{n.removeEventListener("change",s);}},[e]),t=()=>window.matchMedia(e).matches,r=()=>{throw new Error("useMediaQuery is a client-only hook")};return S__default.default.useSyncExternalStore(o,t,r)}function A(){return m("(prefers-color-scheme: dark)")}function I(){return m("(prefers-contrast: more)")}function C(){return m("(prefers-contrast: less)")}function O(){return m("(prefers-reduced-motion: reduce)")}function P(){return m("(prefers-reduced-transparency: reduce)")}function Fe(e,o={}){let[t,r]=S__default.default.useState(new jsMonad.Awaiting),s=S__default.default.useRef(o);return S__default.default.useEffect(()=>{let n=document.querySelector(`script[src="${e}"]`);if(n)switch(n.getAttribute("data-status")){case"ready":r(jsMonad.Success.of("ready"));break;case"error":r(jsMonad.Failure.dueTo(`Failed to load script: ${e}`,"error"));break;default:r(jsMonad.Success.of("external"));break}else if(n=document.createElement("script"),n){n.src=e,n.async=!0,document.body.appendChild(n);let i=()=>{n?.setAttribute("data-status","ready"),r(jsMonad.Success.of(!0)),c();},u=()=>{n?.setAttribute("data-status","error"),r(jsMonad.Failure.dueTo(`Failed to load script: ${e}`,"error")),c();},c=()=>{n?.removeEventListener("load",i),n?.removeEventListener("error",u);};n.addEventListener("load",i),n.addEventListener("error",u);let p=s.current.removeOnUnmount;return ()=>{p===!0&&(n?.remove(),c());}}else r(jsMonad.Failure.dueTo(`Failed to add script tag for : ${e}`,"error"));},[e]),t}function j(e,o,t,r){window.dispatchEvent(new StorageEvent("storage",{key:e,newValue:o,oldValue:t,storageArea:r}));}var K=e=>(window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)),U=()=>{throw Error("this is a client-only hook")};function v(e,o){let t=o.getItem(e);if(!t)return jsMonad.Failure.dueTo(`${e} is not available in ${o} storage`,"NOT_AVAILABLE");try{let r=JSON.parse(t);return jsMonad.Success.of(r)}catch{return jsMonad.Failure.dueTo(`${e} has invalid format in storage`,"INVALID_FORMAT")}}function k(e,o,t){let r=v(e,t);try{let s=JSON.stringify(o);return t.setItem(e,s),j(e,o,r instanceof jsMonad.Failure?null:r.unwrap(),t),jsMonad.Success.of(o)}catch{return jsMonad.Failure.dueTo(`${o} has invalid format to put into storage`,"INVALID_FORMAT")}}function H(e,o){let t=v(e,o);if(t instanceof jsMonad.Failure)return o.removeItem(e),jsMonad.Success.of(e);try{return o.removeItem(e),j(e,null,t.unwrap(),o),jsMonad.Success.of(e)}catch{return jsMonad.Failure.dueTo(`${e} could not be removed from storage`,"INVALID_FORMAT")}}function Ve(e,o,t){let r=()=>v(e,t),s=S__default.default.useSyncExternalStore(K,r,U),n=S__default.default.useCallback(u=>{let c=u;c===null?H(e,t):k(e,c,t);},[e,s]),i=S__default.default.useCallback(()=>{H(e,t);},[e,s]);return S__default.default.useEffect(()=>{k(e,o,t);},[e,o]),[s,n,i]}function De(){let[e,o]=S__default.default.useState({x:0,y:0}),t=S__default.default.useCallback((...r)=>{if(typeof r[0]=="object")window.scrollTo(r[0]);else if(typeof r[0]=="number"&&typeof r[1]=="number")window.scrollTo(r[0],r[1]);else throw new Error("Invalid arguments passed to scrollTo. See here for more info: https://developer.mozilla.org/en-US/docs/Web/API/Window/scrollTo")},[]);return S__default.default.useLayoutEffect(()=>{let r=()=>{o({x:window.scrollX,y:window.scrollY});};return r(),window.addEventListener("scroll",r),()=>{window.removeEventListener("scroll",r);}},[]),[e,t]}function ze(e,o="0px"){let[t,r]=S.useState(!1);return S.useEffect(()=>{if(e.current==null)return;let s=new IntersectionObserver(([n])=>r(n.isIntersecting),{rootMargin:o});return s.observe(e.current),()=>{e.current!=null&&s.unobserve(e.current);}},[e.current,o]),t}var g=class{constructor(o,t,r,s,n){this.reducedMotion=o,this.highContrast=t,this.lowContrast=r,this.reducedTransparency=s,this.darkMode=n;}prefersDarkMode(){return this.darkMode}prefersHighContrast(){return this.highContrast}prefersLowContrast(){return this.lowContrast}prefersReducedMotion(){return this.reducedMotion}prefersTransparency(){return this.reducedTransparency}};var Qe=()=>{let e=O(),o=I(),t=C(),r=P(),s=A();return new g(e,o,t,r,s)};

exports.BrowserAccessibilityPreferences = g;
exports.CookieStorage = x;
exports.useAppleTouchFavicon = T;
exports.useBrowserAccessibilityPreferences = Qe;
exports.useCopyToClipboard = Le;
exports.useDebounce = X;
exports.useDocumentTitle = Se;
exports.useEventListener = a;
exports.useFavicon = Ee;
exports.useGeolocation = Ce;
exports.useHover = he;
exports.useIcoFavicon = R;
exports.useIdle = Oe;
exports.useKeyboardShortcuts = ce;
exports.useLockBodyScroll = fe;
exports.useLongPress = le;
exports.useMeasure = ae;
exports.useMediaQuery = m;
exports.useOnScreen = ze;
exports.usePrefersDarkMode = A;
exports.usePrefersHighContast = I;
exports.usePrefersLowContrast = C;
exports.usePrefersReducedMotion = O;
exports.usePrefersReducedTransparancy = P;
exports.useScript = Fe;
exports.useStorage = Ve;
exports.useSvgFavicon = L;
exports.useThrottle = y;
exports.useViewportSize = se;
exports.useVisibilityChange = me;
exports.useWindowScroll = De;
//# sourceMappingURL=out.js.map
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9ob29rcy91c2UtZGVib3VuY2UudHMiLCIuLi9zcmMvaG9va3MvdXNlLXRyb3R0bGUudHMiLCIuLi9zcmMvaG9va3MvdXNlLXZpZXdwb3J0LXNpemUudHMiLCIuLi9zcmMvaG9va3MvdXNlLWV2ZW50LWxpc3RlbmVyLnRzIiwiLi4vc3JjL2hvb2tzL3VzZS1rZXlib2FyZC1zaG9ydGN1dC50cyIsIi4uL3NyYy9ob29rcy91c2UtbWVhc3VyZS50cyIsIi4uL3NyYy9ob29rcy91c2UtbG9uZy1wcmVzcy50cyIsIi4uL3NyYy9ob29rcy91c2UtdmlzaWJpbGl0eS1jaGFuZ2UudHMiLCIuLi9zcmMvaG9va3MvdXNlLWxvY2stYm9keS1zY3JvbGwudHMiLCIuLi9zcmMvaG9va3MvdXNlLWhvdmVyLnRzIiwiLi4vc3JjL3N0b3JhZ2UvY29va2llLnRzIiwiLi4vc3JjL2hvb2tzL3VzZS1kb2N1bWVudC10aXRsZS50cyIsIi4uL3NyYy9ob29rcy91c2UtZmF2aWNvbi50cyIsIi4uL3NyYy9ob29rcy91c2UtYXBwbGUtdG91Y2gtZmF2aWNvbi50cyIsIi4uL3NyYy9ob29rcy91c2UtaWNvLWZhdmljb24udHMiLCIuLi9zcmMvaG9va3MvdXNlLXN2Zy1mYXZpY29uLnRzIiwiLi4vc3JjL2hvb2tzL3VzZS1jb3B5LXRvLWNsaXBib2FyZC50cyIsIi4uL3NyYy9ob29rcy91c2UtZ2VvbG9jYXRpb24udHMiLCIuLi9zcmMvaG9va3MvdXNlLWlkbGUudHMiLCIuLi9zcmMvaG9va3MvdXNlLW1lZGlhLXF1ZXJ5LnRzIiwiLi4vc3JjL2hvb2tzL3VzZS1wcmVmZXJzLWRhcmstbW9kZS50cyIsIi4uL3NyYy9ob29rcy91c2UtcHJlZmVycy1oaWdoLWNvbnRhc3QudHMiLCIuLi9zcmMvaG9va3MvdXNlLXByZWZlcnMtbG93LWNvbnRyYXN0LnRzIiwiLi4vc3JjL2hvb2tzL3VzZS1wcmVmZXJzLXJlZHVjZWQtbW90aW9uLnRzIiwiLi4vc3JjL2hvb2tzL3VzZS1wcmVmZXJzLXJlZHVjZWQtdHJhbnNwYXJhbmN5LnRzIiwiLi4vc3JjL2hvb2tzL3VzZS1zY3JpcHQudHMiLCIuLi9zcmMvaG9va3MvdXNlLXN0b3JhZ2UudHMiLCIuLi9zcmMvc3RvcmFnZS9zdG9yYWdlLnRzIiwiLi4vc3JjL2hvb2tzL3VzZS13aW5kb3ctc2Nyb2xsLnRzIiwiLi4vc3JjL2hvb2tzL3VzZS1vbi1zY3JlZW4udHMiLCIuLi9zcmMvYWNjZXNzaWJpbGl0eS9wcmVmZXJlbmNlcy50cyIsIi4uL3NyYy9ob29rcy91c2UtYWNjZXNzaWJpbGl0eS1wcmVmZXJlbmNlcy50cyJdLCJuYW1lcyI6WyJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZURlYm91bmNlIiwidmFsdWUiLCJkZWxheSIsImRlYm91bmNlZFZhbHVlIiwic2V0RGVib3VuY2VkVmFsdWUiLCJoYW5kbGVyIiwidXNlUmVmIiwidXNlVGhyb3R0bGUiLCJpbnRlcnZhbCIsInRocm90dGxlZFZhbHVlIiwic2V0VGhyb3R0bGVkVmFsdWUiLCJsYXN0VXBkYXRlZCIsIm5vdyIsImlkIiwidXNlQ2FsbGJhY2siLCJ1c2VFdmVudExpc3RlbmVyIiwiZXZlbnRUeXBlIiwiY2FsbGJhY2siLCJlbGVtZW50IiwiY2FsbGJhY2tSZWYiLCJldmVudExpc3RlbmVyIiwiZXZlbnQiLCJ1c2VWaWV3cG9ydFNpemUiLCJ3aW5kb3dTaXplIiwic2V0V2luZG93U2l6ZSIsInNldFNpemUiLCJ1c2VLZXlib2FyZFNob3J0Y3V0T3JpZ2luYWwiLCJ1c2VLZXlib2FyZFNob3J0Y3V0cyIsImtleXMiLCJvcHRpb25zIiwiZmx1c2hIZWxkS2V5cyIsIlJlYWN0IiwidXNlTWVhc3VyZSIsImRpbWVuc2lvbnMiLCJzZXREaW1lbnNpb25zIiwicHJldmlvdXNPYnNlcnZlciIsIm5vZGUiLCJvYnNlcnZlciIsImVudHJ5Iiwid2lkdGgiLCJoZWlnaHQiLCJpc01vdXNlRXZlbnQiLCJpc1RvdWNoRXZlbnQiLCJ1c2VMb25nUHJlc3MiLCJ0aHJlc2hvbGQiLCJvblN0YXJ0Iiwib25GaW5pc2giLCJvbkNhbmNlbCIsImlzTG9uZ1ByZXNzQWN0aXZlIiwiaXNQcmVzc2VkIiwidGltZXJJZCIsInN0YXJ0IiwiY2FuY2VsIiwidXNlVmlzaWJpbGl0eUNoYW5nZSIsInVzZUxheW91dEVmZmVjdCIsInVzZUxvY2tCb2R5U2Nyb2xsIiwib3JpZ2luYWxTdHlsZSIsInVzZUhvdmVyIiwicmVmIiwiaG92ZXJlZCIsInNldEhvdmVyZWQiLCJDb29raWVzIiwiQ29va2llU3RvcmFnZSIsImFsbENvb2tpZXMiLCJrZXkiLCJpbmRleCIsInVzZURvY3VtZW50VGl0bGUiLCJ0aXRsZSIsInVzZUFwcGxlVG91Y2hGYXZpY29uIiwiYXBwbGVUb3VjaCIsImFwcGxlVG91Y2hMaW5rIiwidXNlSWNvRmF2aWNvbiIsImljbyIsImljb0xpbmsiLCJ1c2VTdmdGYXZpY29uIiwic3ZnIiwic3ZnTGluayIsInVzZUZhdmljb24iLCJBd2FpdGluZyIsIkZhaWx1cmUiLCJTdWNjZXNzIiwidXNlQ29weVRvQ2xpcGJvYXJkIiwiY29waWVkVGV4dCIsInNldENvcGllZFRleHQiLCJjb3B5VG9DbGlwYm9hcmQiLCJlcnJvciIsInVzZUdlb2xvY2F0aW9uIiwic3RhdGUiLCJzZXRTdGF0ZSIsIm9wdGlvbnNSZWYiLCJvbkV2ZW50IiwiY29vcmRzIiwidGltZXN0YW1wIiwib25FdmVudEVycm9yIiwiZW5hYmxlSGlnaEFjY3VyYWN5IiwidGltZW91dCIsIm1heGltdW1BZ2UiLCJ3YXRjaElkIiwidXNlSWRsZSIsIm1zIiwiaWRsZSIsInNldElkbGUiLCJ0aW1lb3V0SWQiLCJoYW5kbGVUaW1lb3V0IiwiaGFuZGxlRXZlbnQiLCJlIiwiaGFuZGxlVmlzaWJpbGl0eUNoYW5nZSIsInVzZU1lZGlhUXVlcnkiLCJxdWVyeSIsInN1YnNjcmliZSIsIm1hdGNoTWVkaWEiLCJnZXRTbmFwc2hvdCIsImdldFNlcnZlclNuYXBzaG90IiwidXNlUHJlZmVyc0RhcmtNb2RlIiwidXNlUHJlZmVyc0hpZ2hDb250YXN0IiwidXNlUHJlZmVyc0xvd0NvbnRyYXN0IiwidXNlUHJlZmVyc1JlZHVjZWRNb3Rpb24iLCJ1c2VQcmVmZXJzUmVkdWNlZFRyYW5zcGFyYW5jeSIsInVzZVNjcmlwdCIsInNyYyIsInN0YXR1cyIsInNldFN0YXR1cyIsInNjcmlwdCIsImhhbmRsZVNjcmlwdExvYWQiLCJjbGVhbnVwTGlzdGVuZXJzIiwiaGFuZGxlU2NyaXB0RXJyb3IiLCJyZW1vdmVPblVubW91bnQiLCJkaXNwYXRjaFN0b3JhZ2VFdmVudCIsIm5ld1ZhbHVlIiwib2xkVmFsdWUiLCJzdG9yYWdlQXJlYSIsInVzZVN0b3JhZ2VTdWJzY3JpYmUiLCJnZXRTdG9yYWdlU2VydmVyU25hcHNob3QiLCJnZXRTdG9yYWdlSXRlbSIsIml0ZW0iLCJvYmplY3QiLCJzZXRTdG9yYWdlSXRlbSIsImN1cnJlbnRJdGVtIiwicmVtb3ZlU3RvcmFnZUl0ZW0iLCJ1c2VTdG9yYWdlIiwiaW5pdGlhbFZhbHVlIiwic3RvcmVkIiwic2V0IiwibmV4dFN0YXRlIiwiY2xlYXIiLCJ1c2VXaW5kb3dTY3JvbGwiLCJzY3JvbGxUbyIsImFyZ3MiLCJoYW5kbGVTY3JvbGwiLCJ1c2VPblNjcmVlbiIsInJvb3RNYXJnaW4iLCJpc1Zpc2libGUiLCJzZXRJc1Zpc2libGUiLCJCcm93c2VyQWNjZXNzaWJpbGl0eVByZWZlcmVuY2VzIiwicmVkdWNlZE1vdGlvbiIsImhpZ2hDb250cmFzdCIsImxvd0NvbnRyYXN0IiwicmVkdWNlZFRyYW5zcGFyZW5jeSIsImRhcmtNb2RlIiwidXNlQnJvd3NlckFjY2Vzc2liaWxpdHlQcmVmZXJlbmNlcyIsImhhc1JlZHVjZWRNb3Rpb24iLCJoYXNIaWdoQ29udHJhc3QiLCJoYXNMb3dDb250cmFzdCIsImhhc1JlZHVjZWRUcmFuc3BhcmVuY3kiLCJoYXNEYXJrTW9kZSJdLCJtYXBwaW5ncyI6IkFBQUEsT0FBUyxZQUFBQSxFQUFVLGFBQUFDLE1BQWlCLFFBRTdCLFNBQVNDLEVBQWVDLEVBQVVDLEVBQWtCLENBQ3pELEdBQU0sQ0FBQ0MsRUFB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LFNBQVdDLENBQ2xCLENBRUEsaUJBQTJCLENBQ3pCLE9BQU8sS0FBSyxRQUNkLENBRUEscUJBQStCLENBQzdCLE9BQU8sS0FBSyxZQUNkLENBRUEsb0JBQThCLENBQzVCLE9BQU8sS0FBSyxXQUNkLENBRUEsc0JBQWdDLENBQzlCLE9BQU8sS0FBSyxhQUNkLENBRUEscUJBQStCLENBQzdCLE9BQU8sS0FBSyxtQkFDZCxDQUNGLEVDaENBLElBQU1DLEdBQ0osSUFBdUMsQ0FDckMsSUFBTUMsRUFBbUI1QyxFQUF3QixFQUMzQzZDLEVBQWtCL0MsRUFBc0IsRUFDeENnRCxFQUFpQi9DLEVBQXNCLEVBQ3ZDZ0QsRUFBeUI5QyxFQUE4QixFQUN2RCtDLEVBQWNuRCxFQUFtQixFQUV2QyxPQUFPLElBQUl3QyxFQUNUTyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxDQUNGLENBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VEZWJvdW5jZTxUPih2YWx1ZTogVCwgZGVsYXk6IG51bWJlcik6IFQge1xuICBjb25zdCBbZGVib3VuY2VkVmFsdWUsIHNldERlYm91bmNlZFZhbHVlXSA9IHVzZVN0YXRlPFQ+KHZhbHVlKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHNldERlYm91bmNlZFZhbHVlKHZhbHVlKTtcbiAgICB9LCBkZWxheSk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY2xlYXJUaW1lb3V0KGhhbmRsZXIpO1xuICAgIH07XG4gIH0sIFt2YWx1ZSwgZGVsYXldKTtcblxuICByZXR1cm4gZGVib3VuY2VkVmFsdWU7XG59XG4iLCJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tIFwicmVhY3RcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZVRocm90dGxlPFQ+KHZhbHVlOiBULCBpbnRlcnZhbDogbnVtYmVyID0gNTAwKTogVCB7XG4gIGNvbnN0IFt0aHJvdHRsZWRWYWx1ZSwgc2V0VGhyb3R0bGVkVmFsdWVdID0gdXNlU3RhdGU8VD4odmFsdWUpO1xuICBjb25zdCBsYXN0VXBkYXRlZCA9IHVzZVJlZjxudW1iZXIgfCBudWxsPihudWxsKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG5cbiAgICBpZiAobGFzdFVwZGF0ZWQuY3VycmVudCAmJiBub3cgPj0gbGFzdFVwZGF0ZWQuY3VycmVudCArIGludGVydmFsKSB7XG4gICAgICBsYXN0VXBkYXRlZC5jdXJyZW50ID0gbm93O1xuICAgICAgc2V0VGhyb3R0bGVkVmFsdWUodmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBpZCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgbGFzdFVwZGF0ZWQuY3VycmVudCA9IG5vdztcbiAgICAgICAgc2V0VGhyb3R0bGVkVmFsdWUodmFsdWUpO1xuICAgICAgfSwgaW50ZXJ2YWwpO1xuXG4gICAgICByZXR1cm4gKCkgPT4gd2luZG93LmNsZWFyVGltZW91dChpZCk7XG4gICAgfVxuICB9LCBbdmFsdWUsIGludGVydmFsXSk7XG5cbiAgcmV0dXJuIHRocm90dGxlZFZhbHVlO1xufVxuIiwiaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZUV2ZW50TGlzdGVuZXIgfSBmcm9tIFwiQC9ob29rcy91c2UtZXZlbnQtbGlzdGVuZXJcIjtcblxuZXhwb3J0IGludGVyZmFjZSBWaWV3cG9ydFNpemUge1xuICB3aWR0aDogbnVtYmVyO1xuICBoZWlnaHQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZVZpZXdwb3J0U2l6ZSgpOiBWaWV3cG9ydFNpemUge1xuICBjb25zdCBbd2luZG93U2l6ZSwgc2V0V2luZG93U2l6ZV0gPSB1c2VTdGF0ZTxWaWV3cG9ydFNpemU+KHtcbiAgICB3aWR0aDogMCxcbiAgICBoZWlnaHQ6IDAsXG4gIH0pO1xuXG4gIGNvbnN0IHNldFNpemUgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0V2luZG93U2l6ZSh7XG4gICAgICB3aWR0aDogd2luZG93LmlubmVyV2lkdGggfHwgMCxcbiAgICAgIGhlaWdodDogd2luZG93LmlubmVySGVpZ2h0IHx8IDAsXG4gICAgfSk7XG4gIH0sIFtdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldFNpemUoKTsgLy8gSW5pdGlhbCBzaXplIG9uIG1vdW50XG4gIH0sIFtzZXRTaXplXSk7XG5cbiAgdXNlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCAoKSA9PiBzZXRTaXplLCB3aW5kb3cpO1xuICB1c2VFdmVudExpc3RlbmVyKFwib3JpZW50YXRpb25jaGFuZ2VcIiwgKCkgPT4gc2V0U2l6ZSwgd2luZG93KTtcblxuICByZXR1cm4gd2luZG93U2l6ZTtcbn1cbiIsImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSBcInJlYWN0XCI7XG5cbnR5cGUgRXZlbnRUeXBlID0ga2V5b2YgRG9jdW1lbnRFdmVudE1hcCB8IGtleW9mIFdpbmRvd0V2ZW50TWFwO1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlRXZlbnRMaXN0ZW5lcihcbiAgZXZlbnRUeXBlOiBFdmVudFR5cGUsXG4gIGNhbGxiYWNrOiAoZXZlbnQ6IEV2ZW50KSA9PiB2b2lkLFxuICBlbGVtZW50OiBIVE1MRWxlbWVudCB8IFdpbmRvdyB8IERvY3VtZW50ID0gd2luZG93LFxuKTogdm9pZCB7XG4gIGNvbnN0IGNhbGxiYWNrUmVmID0gdXNlUmVmKGNhbGxiYWNrKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNhbGxiYWNrUmVmLmN1cnJlbnQgPSBjYWxsYmFjaztcbiAgfSwgW2NhbGxiYWNrXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWVsZW1lbnQpIHJldHVybjtcblxuICAgIGNvbnN0IGV2ZW50TGlzdGVuZXIgPSAoZXZlbnQ6IEV2ZW50KSA9PiBjYWxsYmFja1JlZi5jdXJyZW50KGV2ZW50KTtcbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBldmVudExpc3RlbmVyKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBldmVudExpc3RlbmVyKTtcbiAgICB9O1xuICB9LCBbZXZlbnRUeXBlLCBlbGVtZW50XSk7XG59XG4iLCJpbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB1c2VLZXlib2FyZFNob3J0Y3V0T3JpZ2luYWwgZnJvbSBcInVzZS1rZXlib2FyZC1zaG9ydGN1dFwiO1xuXG5leHBvcnQgdHlwZSBTaG9ydGN1dEtleXMgPSBzdHJpbmdbXTtcbmV4cG9ydCBpbnRlcmZhY2UgU2hvcnRjdXRPcHRpb25zIHtcbiAgb3ZlcnJpZGVTeXN0ZW0/OiBib29sZWFuO1xuICBpZ25vcmVJbnB1dEZpZWxkcz86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VLZXlib2FyZFNob3J0Y3V0cyhcbiAga2V5czogU2hvcnRjdXRLZXlzLFxuICBjYWxsYmFjazogKHNob3J0Y3V0S2V5czogU2hvcnRjdXRLZXlzKSA9PiB2b2lkLFxuICBvcHRpb25zOiBTaG9ydGN1dE9wdGlvbnMsXG4pOiB2b2lkIHtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCB7IGZsdXNoSGVsZEtleXMgfSA9IHVzZUtleWJvYXJkU2hvcnRjdXRPcmlnaW5hbChcbiAgICAgIGtleXMsXG4gICAgICBjYWxsYmFjayxcbiAgICAgIG9wdGlvbnMsXG4gICAgKTtcbiAgICBmbHVzaEhlbGRLZXlzKCk7XG4gIH0sIFtrZXlzLCBjYWxsYmFjaywgb3B0aW9uc10pO1xufVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlTWVhc3VyZSgpOiBbXG4gIChub2RlOiBFbGVtZW50KSA9PiB2b2lkLFxuICB7IHdpZHRoOiBudW1iZXI7IGhlaWdodDogbnVtYmVyIH0sXG5dIHtcbiAgY29uc3QgW2RpbWVuc2lvbnMsIHNldERpbWVuc2lvbnNdID0gUmVhY3QudXNlU3RhdGUoe1xuICAgIHdpZHRoOiAwLFxuICAgIGhlaWdodDogMCxcbiAgfSk7XG5cbiAgY29uc3QgcHJldmlvdXNPYnNlcnZlciA9IFJlYWN0LnVzZVJlZjxSZXNpemVPYnNlcnZlciB8IG51bGw+KG51bGwpO1xuXG4gIGNvbnN0IGN1c3RvbVJlZiA9IFJlYWN0LnVzZUNhbGxiYWNrKChub2RlOiBFbGVtZW50KSA9PiB7XG4gICAgaWYgKHByZXZpb3VzT2JzZXJ2ZXIuY3VycmVudCkge1xuICAgICAgcHJldmlvdXNPYnNlcnZlci5jdXJyZW50LmRpc2Nvbm5lY3QoKTtcbiAgICAgIHByZXZpb3VzT2JzZXJ2ZXIuY3VycmVudCA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFKSB7XG4gICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcigoW2VudHJ5XSkgPT4ge1xuICAgICAgICBpZiAoZW50cnkgJiYgZW50cnkuYm9yZGVyQm94U2l6ZSkge1xuICAgICAgICAgIGNvbnN0IHsgaW5saW5lU2l6ZTogd2lkdGgsIGJsb2NrU2l6ZTogaGVpZ2h0IH0gPVxuICAgICAgICAgICAgZW50cnkuYm9yZGVyQm94U2l6ZVswXTtcbiAgICAgICAgICBzZXREaW1lbnNpb25zKHsgd2lkdGgsIGhlaWdodCB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIG9ic2VydmVyLm9ic2VydmUobm9kZSk7XG4gICAgICBwcmV2aW91c09ic2VydmVyLmN1cnJlbnQgPSBvYnNlcnZlcjtcbiAgICB9XG4gIH0sIFtdKTtcblxuICByZXR1cm4gW2N1c3RvbVJlZiwgZGltZW5zaW9uc107XG59XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5cbmZ1bmN0aW9uIGlzTW91c2VFdmVudChldmVudDogRXZlbnQpOiBldmVudCBpcyBNb3VzZUV2ZW50IHtcbiAgcmV0dXJuIFwiY2xpZW50WFwiIGluIGV2ZW50OyAvLyBDaGVja2luZyBmb3IgYSBwcm9wZXJ0eSBzcGVjaWZpYyB0byBNb3VzZUV2ZW50XG59XG5cbmZ1bmN0aW9uIGlzVG91Y2hFdmVudChldmVudDogRXZlbnQpOiBldmVudCBpcyBUb3VjaEV2ZW50IHtcbiAgcmV0dXJuIFwidG91Y2hlc1wiIGluIGV2ZW50OyAvLyBDaGVja2luZyBmb3IgYSBwcm9wZXJ0eSBzcGVjaWZpYyB0byBUb3VjaEV2ZW50XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VMb25nUHJlc3MoXG4gIGNhbGxiYWNrOiAoZXZlbnQ6IEV2ZW50KSA9PiB2b2lkLFxuICBvcHRpb25zOiB7XG4gICAgdGhyZXNob2xkPzogbnVtYmVyO1xuICAgIG9uU3RhcnQ/OiAoZXZlbnQ6IEV2ZW50KSA9PiB2b2lkO1xuICAgIG9uRmluaXNoPzogKGV2ZW50OiBFdmVudCkgPT4gdm9pZDtcbiAgICBvbkNhbmNlbD86IChldmVudDogRXZlbnQpID0+IHZvaWQ7XG4gIH0gPSB7fSxcbikge1xuICBjb25zdCB7IHRocmVzaG9sZCA9IDQwMCwgb25TdGFydCwgb25GaW5pc2gsIG9uQ2FuY2VsIH0gPSBvcHRpb25zO1xuICBjb25zdCBpc0xvbmdQcmVzc0FjdGl2ZSA9IFJlYWN0LnVzZVJlZihmYWxzZSk7XG4gIGNvbnN0IGlzUHJlc3NlZCA9IFJlYWN0LnVzZVJlZihmYWxzZSk7XG4gIGNvbnN0IHRpbWVySWQgPSBSZWFjdC51c2VSZWY8bnVtYmVyPigpO1xuXG4gIHJldHVybiBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHJldHVybiB7fTtcbiAgICB9XG5cbiAgICBjb25zdCBzdGFydCA9IChldmVudDogRXZlbnQpID0+IHtcbiAgICAgIGlmICghaXNNb3VzZUV2ZW50KGV2ZW50KSAmJiAhaXNUb3VjaEV2ZW50KGV2ZW50KSkgcmV0dXJuO1xuXG4gICAgICBpZiAob25TdGFydCkge1xuICAgICAgICBvblN0YXJ0KGV2ZW50KTtcbiAgICAgIH1cblxuICAgICAgaXNQcmVzc2VkLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgdGltZXJJZC5jdXJyZW50ID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBjYWxsYmFjayhldmVudCk7XG4gICAgICAgIGlzTG9uZ1ByZXNzQWN0aXZlLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgfSwgdGhyZXNob2xkKTtcbiAgICB9O1xuXG4gICAgY29uc3QgY2FuY2VsID0gKGV2ZW50OiBFdmVudCkgPT4ge1xuICAgICAgaWYgKCFpc01vdXNlRXZlbnQoZXZlbnQpICYmICFpc1RvdWNoRXZlbnQoZXZlbnQpKSByZXR1cm47XG5cbiAgICAgIGlmIChpc0xvbmdQcmVzc0FjdGl2ZS5jdXJyZW50KSB7XG4gICAgICAgIGlmIChvbkZpbmlzaCkge1xuICAgICAgICAgIG9uRmluaXNoKGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpc1ByZXNzZWQuY3VycmVudCkge1xuICAgICAgICBpZiAob25DYW5jZWwpIHtcbiAgICAgICAgICBvbkNhbmNlbChldmVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaXNMb25nUHJlc3NBY3RpdmUuY3VycmVudCA9IGZhbHNlO1xuICAgICAgaXNQcmVzc2VkLmN1cnJlbnQgPSBmYWxzZTtcblxuICAgICAgaWYgKHRpbWVySWQuY3VycmVudCkge1xuICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVySWQuY3VycmVudCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IG1vdXNlSGFuZGxlcnMgPSB7XG4gICAgICBvbk1vdXNlRG93bjogc3RhcnQsXG4gICAgICBvbk1vdXNlVXA6IGNhbmNlbCxcbiAgICAgIG9uTW91c2VMZWF2ZTogY2FuY2VsLFxuICAgIH07XG5cbiAgICBjb25zdCB0b3VjaEhhbmRsZXJzID0ge1xuICAgICAgb25Ub3VjaFN0YXJ0OiBzdGFydCxcbiAgICAgIG9uVG91Y2hFbmQ6IGNhbmNlbCxcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLm1vdXNlSGFuZGxlcnMsXG4gICAgICAuLi50b3VjaEhhbmRsZXJzLFxuICAgIH07XG4gIH0sIFtjYWxsYmFjaywgdGhyZXNob2xkLCBvbkNhbmNlbCwgb25GaW5pc2gsIG9uU3RhcnRdKTtcbn1cbiIsImV4cG9ydCBjb25zdCB1c2VWaXNpYmlsaXR5Q2hhbmdlID0gKGNhbGxiYWNrOiAoKSA9PiB2b2lkKSA9PiB7XG4gIC8vIEFkZCBldmVudCBsaXN0ZW5lciBmb3IgdmlzaWJpbGl0eSBjaGFuZ2VcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgY2FsbGJhY2spO1xuXG4gIC8vIENsZWFuIHVwIGJ5IHJlbW92aW5nIGV2ZW50IGxpc3RlbmVyIHdoZW4gY29tcG9uZW50IHVubW91bnRzXG4gIHJldHVybiAoKSA9PiB7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgY2FsbGJhY2spO1xuICB9O1xufTtcbiIsImltcG9ydCB7IHVzZUxheW91dEVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlTG9ja0JvZHlTY3JvbGwoKSB7XG4gIHVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgLy8gR2V0IG9yaWdpbmFsIGJvZHkgb3ZlcmZsb3dcbiAgICBjb25zdCBvcmlnaW5hbFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkub3ZlcmZsb3c7XG5cbiAgICAvLyBQcmV2ZW50IHNjcm9sbGluZyBvbiBtb3VudFxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xuXG4gICAgLy8gUmUtZW5hYmxlIHNjcm9sbGluZyB3aGVuIGNvbXBvbmVudCB1bm1vdW50c1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gb3JpZ2luYWxTdHlsZTtcbiAgICB9O1xuICB9LCBbXSk7IC8vIEVtcHR5IGRlcGVuZGVuY3kgYXJyYXkgZW5zdXJlcyBlZmZlY3QgaXMgb25seSBydW4gb24gbW91bnQgYW5kIHVubW91bnRcbn1cbiIsImltcG9ydCB7IHVzZVN0YXRlLCBSZWZPYmplY3QgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZUV2ZW50TGlzdGVuZXIgfSBmcm9tIFwiQC9ob29rcy91c2UtZXZlbnQtbGlzdGVuZXJcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUhvdmVyKFxuICByZWY6IFJlZk9iamVjdDxIVE1MRWxlbWVudCB8IFdpbmRvdyB8IERvY3VtZW50Pixcbik6IGJvb2xlYW4ge1xuICBjb25zdCBbaG92ZXJlZCwgc2V0SG92ZXJlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgaWYgKHJlZi5jdXJyZW50KSB7XG4gICAgdXNlRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCAoKSA9PiBzZXRIb3ZlcmVkKHRydWUpLCByZWYuY3VycmVudCk7XG4gICAgdXNlRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3V0XCIsICgpID0+IHNldEhvdmVyZWQoZmFsc2UpLCByZWYuY3VycmVudCk7XG4gIH1cblxuICByZXR1cm4gaG92ZXJlZDtcbn1cbiIsImltcG9ydCBDb29raWVzIGZyb20gXCJqcy1jb29raWVcIjtcblxuZXhwb3J0IGNsYXNzIENvb2tpZVN0b3JhZ2UgaW1wbGVtZW50cyBTdG9yYWdlIHtcbiAgZ2V0IGxlbmd0aCgpOiBudW1iZXIge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhDb29raWVzLmdldCgpKS5sZW5ndGg7XG4gIH1cblxuICBjbGVhcigpOiB2b2lkIHtcbiAgICBjb25zdCBhbGxDb29raWVzID0gQ29va2llcy5nZXQoKTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBhbGxDb29raWVzKSB7XG4gICAgICBDb29raWVzLnJlbW92ZShrZXkpO1xuICAgIH1cbiAgfVxuXG4gIGdldEl0ZW0oa2V5OiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBjb25zdCB2YWx1ZSA9IENvb2tpZXMuZ2V0KGtleSk7XG4gICAgcmV0dXJuIHZhbHVlICE9PSB1bmRlZmluZWQgPyB2YWx1ZSA6IG51bGw7XG4gIH1cblxuICBrZXkoaW5kZXg6IG51bWJlcik6IHN0cmluZyB8IG51bGwge1xuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhDb29raWVzLmdldCgpKTtcbiAgICByZXR1cm4ga2V5cy5sZW5ndGggPiBpbmRleCA/IGtleXNbaW5kZXhdIDogbnVsbDtcbiAgfVxuXG4gIHJlbW92ZUl0ZW0oa2V5OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBDb29raWVzLnJlbW92ZShrZXkpO1xuICB9XG5cbiAgc2V0SXRlbShrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZyk6IHZvaWQge1xuICAgIENvb2tpZXMuc2V0KGtleSwgdmFsdWUpO1xuICB9XG5cbiAgLy8gT3B0aW9uYWw6IEltcGxlbWVudCB0b1N0cmluZygpIG1ldGhvZCBmb3IgZGVidWdnaW5nIG9yIGxvZ2dpbmdcbiAgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoQ29va2llcy5nZXQoKSwgbnVsbCwgMik7XG4gIH1cbn1cbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZURvY3VtZW50VGl0bGUodGl0bGU6IHN0cmluZykge1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGRvY3VtZW50LnRpdGxlID0gdGl0bGU7XG4gIH0sIFt0aXRsZV0pO1xufVxuIiwiaW1wb3J0IHsgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VBcHBsZVRvdWNoRmF2aWNvbiB9IGZyb20gXCJAL2hvb2tzL3VzZS1hcHBsZS10b3VjaC1mYXZpY29uXCI7XG5pbXBvcnQgeyB1c2VJY29GYXZpY29uIH0gZnJvbSBcIkAvaG9va3MvdXNlLWljby1mYXZpY29uXCI7XG5pbXBvcnQgeyB1c2VTdmdGYXZpY29uIH0gZnJvbSBcIkAvaG9va3MvdXNlLXN2Zy1mYXZpY29uXCI7XG5cbi8vIGh0dHBzOi8vZXZpbG1hcnRpYW5zLmNvbS9jaHJvbmljbGVzL2hvdy10by1mYXZpY29uLWluLTIwMjEtc2l4LWZpbGVzLXRoYXQtZml0LW1vc3QtbmVlZHNcbmV4cG9ydCBmdW5jdGlvbiB1c2VGYXZpY29uKFxuICBzdmc6IHN0cmluZyB8IFNWR0VsZW1lbnQsXG4gIGljbzogc3RyaW5nLCAvLyAzMngzMlxuICBhcHBsZVRvdWNoOiBzdHJpbmcsIC8vIDE4MMOXMTgwXG4pOiB2b2lkIHtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICB1c2VTdmdGYXZpY29uKHN2Zyk7XG4gICAgdXNlSWNvRmF2aWNvbihpY28pO1xuICAgIHVzZUFwcGxlVG91Y2hGYXZpY29uKGFwcGxlVG91Y2gpO1xuICB9LCBbc3ZnLCBpY28sIGFwcGxlVG91Y2hdKTtcbn1cbiIsImltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlQXBwbGVUb3VjaEZhdmljb24oXG4gIGFwcGxlVG91Y2g6IHN0cmluZywgLy8gMTgww5cxODBcbik6IHZvaWQge1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIFF1ZXJ5IGZvciB0aGUgYXBwbGUgdG91Y2ggbGlua1xuICAgIGNvbnN0IGFwcGxlVG91Y2hRdWVyeSA9ICdsaW5rW3JlbD1cImFwcGxlLXRvdWNoLWljb25cIl0nO1xuICAgIGxldCBhcHBsZVRvdWNoTGluayA9XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxMaW5rRWxlbWVudD4oYXBwbGVUb3VjaFF1ZXJ5KTtcbiAgICBpZiAoIWFwcGxlVG91Y2hMaW5rKSB7XG4gICAgICBhcHBsZVRvdWNoTGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xuICAgICAgYXBwbGVUb3VjaExpbmsucmVsID0gXCJhcHBsZS10b3VjaC1pY29uXCI7XG4gICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGFwcGxlVG91Y2hMaW5rKTtcbiAgICB9XG4gICAgYXBwbGVUb3VjaExpbmsuaHJlZiA9IGFwcGxlVG91Y2g7XG4gIH0sIFthcHBsZVRvdWNoXSk7XG59XG4iLCJpbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUljb0Zhdmljb24oXG4gIGljbzogc3RyaW5nLCAvLyAzMngzMlxuKTogdm9pZCB7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gUXVlcnkgZm9yIHRoZSBpY28gbGlua1xuICAgIGNvbnN0IGljb1F1ZXJ5ID0gJ2xpbmtbcmVsPVwiaWNvblwiXTpub3QoW3R5cGU9XCJpbWFnZS9zdmcreG1sXCJdKSc7XG4gICAgbGV0IGljb0xpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxMaW5rRWxlbWVudD4oaWNvUXVlcnkpO1xuICAgIGlmICghaWNvTGluaykge1xuICAgICAgaWNvTGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xuICAgICAgaWNvTGluay5yZWwgPSBcImljb25cIjtcbiAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoaWNvTGluayk7XG4gICAgfVxuXG4gICAgaWNvTGluay5ocmVmID0gaWNvO1xuICB9LCBbaWNvXSk7XG59XG4iLCJpbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZVN2Z0Zhdmljb24oc3ZnOiBzdHJpbmcgfCBTVkdFbGVtZW50KTogdm9pZCB7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gUXVlcnkgZm9yIHRoZSBTVkcgaWNvbiBsaW5rXG4gICAgY29uc3Qgc3ZnUXVlcnkgPSAnbGlua1tyZWw9XCJpY29uXCJdW3R5cGU9XCJpbWFnZS9zdmcreG1sXCJdJztcbiAgICBsZXQgc3ZnTGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTExpbmtFbGVtZW50PihzdmdRdWVyeSk7XG5cbiAgICBpZiAoIXN2Z0xpbmspIHtcbiAgICAgIHN2Z0xpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcbiAgICAgIHN2Z0xpbmsudHlwZSA9IFwiaW1hZ2Uvc3ZnK3htbFwiO1xuICAgICAgc3ZnTGluay5yZWwgPSBcImljb25cIjtcbiAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3ZnTGluayk7XG4gICAgfVxuXG4gICAgaWYgKHN2ZyBpbnN0YW5jZW9mIFNWR0VsZW1lbnQpIHtcbiAgICAgIHN2Z0xpbmsuaHJlZiA9IFwiZGF0YTppbWFnZS9zdmcreG1sO3V0ZjgsXCIgKyBzdmc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN2Z0xpbmsuaHJlZiA9IHN2ZztcbiAgICB9XG4gIH0sIFtzdmddKTtcbn1cbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IEFzeW5jUmVzdWx0LCBBd2FpdGluZywgRmFpbHVyZSwgU3VjY2VzcyB9IGZyb20gXCJAdGFjdGljcy9qcy1tb25hZFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlQ29weVRvQ2xpcGJvYXJkKCk6IEFzeW5jUmVzdWx0PHN0cmluZz4ge1xuICBjb25zdCBbY29waWVkVGV4dCwgc2V0Q29waWVkVGV4dF0gPSBSZWFjdC51c2VTdGF0ZTxBc3luY1Jlc3VsdDxzdHJpbmc+PihcbiAgICBuZXcgQXdhaXRpbmcoKSxcbiAgKTtcblxuICBjb25zdCBjb3B5VG9DbGlwYm9hcmQgPSBSZWFjdC51c2VDYWxsYmFjaygodmFsdWU6IHN0cmluZykgPT4ge1xuICAgIHJldHVybiAoXG4gICAgICBuYXZpZ2F0b3IuY2xpcGJvYXJkICYmXG4gICAgICBuYXZpZ2F0b3IuY2xpcGJvYXJkXG4gICAgICAgIC53cml0ZVRleHQodmFsdWUpXG4gICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICBzZXRDb3BpZWRUZXh0KFN1Y2Nlc3Mub2YodmFsdWUpKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnJvcjogRE9NRXhjZXB0aW9uKSA9PiB7XG4gICAgICAgICAgc2V0Q29waWVkVGV4dChGYWlsdXJlLmR1ZVRvKGVycm9yLm1lc3NhZ2UsIGVycm9yLm5hbWUpKTtcbiAgICAgICAgfSlcbiAgICApO1xuICB9LCBbXSk7XG5cbiAgcmV0dXJuIFtjb3BpZWRUZXh0LCBjb3B5VG9DbGlwYm9hcmRdO1xufVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgQXN5bmNSZXN1bHQsIEF3YWl0aW5nLCBGYWlsdXJlLCBTdWNjZXNzIH0gZnJvbSBcIkB0YWN0aWNzL2pzLW1vbmFkXCI7XG5cbmludGVyZmFjZSBHZW9sb2NhdGlvblN0YXRlIHtcbiAgYWNjdXJhY3k6IG51bWJlciB8IG51bGw7XG4gIGFsdGl0dWRlOiBudW1iZXIgfCBudWxsO1xuICBhbHRpdHVkZUFjY3VyYWN5OiBudW1iZXIgfCBudWxsO1xuICBoZWFkaW5nOiBudW1iZXIgfCBudWxsO1xuICBsYXRpdHVkZTogbnVtYmVyIHwgbnVsbDtcbiAgbG9uZ2l0dWRlOiBudW1iZXIgfCBudWxsO1xuICBzcGVlZDogbnVtYmVyIHwgbnVsbDtcbiAgdGltZXN0YW1wOiBudW1iZXIgfCBudWxsO1xufVxuXG5pbnRlcmZhY2UgR2VvbG9jYXRpb25PcHRpb25zIHtcbiAgZW5hYmxlSGlnaEFjY3VyYWN5PzogYm9vbGVhbjtcbiAgdGltZW91dD86IG51bWJlcjtcbiAgbWF4aW11bUFnZT86IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIFBvc2l0aW9uIHtcbiAgY29vcmRzOiB7XG4gICAgbGF0aXR1ZGU6IG51bWJlcjtcbiAgICBsb25naXR1ZGU6IG51bWJlcjtcbiAgICBhY2N1cmFjeTogbnVtYmVyO1xuICAgIGFsdGl0dWRlOiBudW1iZXIgfCBudWxsO1xuICAgIGFsdGl0dWRlQWNjdXJhY3k6IG51bWJlciB8IG51bGw7XG4gICAgaGVhZGluZzogbnVtYmVyIHwgbnVsbDtcbiAgICBzcGVlZDogbnVtYmVyIHwgbnVsbDtcbiAgfTtcbiAgdGltZXN0YW1wOiBudW1iZXI7XG59XG5cbmludGVyZmFjZSBQb3NpdGlvbkVycm9yIHtcbiAgY29kZTogbnVtYmVyO1xuICBtZXNzYWdlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VHZW9sb2NhdGlvbihcbiAgb3B0aW9uczogR2VvbG9jYXRpb25PcHRpb25zID0ge30sXG4pOiBBc3luY1Jlc3VsdDxHZW9sb2NhdGlvblN0YXRlPiB7XG4gIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gUmVhY3QudXNlU3RhdGU8QXN5bmNSZXN1bHQ8R2VvbG9jYXRpb25TdGF0ZT4+KFxuICAgIG5ldyBBd2FpdGluZygpLFxuICApO1xuICBjb25zdCBvcHRpb25zUmVmID0gUmVhY3QudXNlUmVmPEdlb2xvY2F0aW9uT3B0aW9ucz4ob3B0aW9ucyk7XG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBvbkV2ZW50ID0gKHsgY29vcmRzLCB0aW1lc3RhbXAgfTogUG9zaXRpb24pID0+IHtcbiAgICAgIHNldFN0YXRlKFxuICAgICAgICBTdWNjZXNzLm9mKHtcbiAgICAgICAgICB0aW1lc3RhbXAsXG4gICAgICAgICAgbGF0aXR1ZGU6IGNvb3Jkcy5sYXRpdHVkZSxcbiAgICAgICAgICBsb25naXR1ZGU6IGNvb3Jkcy5sb25naXR1ZGUsXG4gICAgICAgICAgYWx0aXR1ZGU6IGNvb3Jkcy5hbHRpdHVkZSxcbiAgICAgICAgICBhY2N1cmFjeTogY29vcmRzLmFjY3VyYWN5LFxuICAgICAgICAgIGFsdGl0dWRlQWNjdXJhY3k6IGNvb3Jkcy5hbHRpdHVkZUFjY3VyYWN5LFxuICAgICAgICAgIGhlYWRpbmc6IGNvb3Jkcy5oZWFkaW5nLFxuICAgICAgICAgIHNwZWVkOiBjb29yZHMuc3BlZWQsXG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgICB9O1xuXG4gICAgY29uc3Qgb25FdmVudEVycm9yID0gKGVycm9yOiBQb3NpdGlvbkVycm9yKSA9PiB7XG4gICAgICBzZXRTdGF0ZShGYWlsdXJlLmR1ZVRvKGVycm9yLm1lc3NhZ2UsIFN0cmluZyhlcnJvci5jb2RlKSkpO1xuICAgIH07XG5cbiAgICBjb25zdCB7IGVuYWJsZUhpZ2hBY2N1cmFjeSwgdGltZW91dCwgbWF4aW11bUFnZSB9ID0gb3B0aW9uc1JlZi5jdXJyZW50O1xuXG4gICAgbmF2aWdhdG9yLmdlb2xvY2F0aW9uLmdldEN1cnJlbnRQb3NpdGlvbihvbkV2ZW50LCBvbkV2ZW50RXJyb3IsIHtcbiAgICAgIGVuYWJsZUhpZ2hBY2N1cmFjeSxcbiAgICAgIHRpbWVvdXQsXG4gICAgICBtYXhpbXVtQWdlLFxuICAgIH0pO1xuXG4gICAgY29uc3Qgd2F0Y2hJZCA9IG5hdmlnYXRvci5nZW9sb2NhdGlvbi53YXRjaFBvc2l0aW9uKG9uRXZlbnQsIG9uRXZlbnRFcnJvciwge1xuICAgICAgZW5hYmxlSGlnaEFjY3VyYWN5LFxuICAgICAgdGltZW91dCxcbiAgICAgIG1heGltdW1BZ2UsXG4gICAgfSk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgbmF2aWdhdG9yLmdlb2xvY2F0aW9uLmNsZWFyV2F0Y2god2F0Y2hJZCk7XG4gICAgfTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiBzdGF0ZTtcbn1cbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZUV2ZW50TGlzdGVuZXIgfSBmcm9tIFwiQC9ob29rcy91c2UtZXZlbnQtbGlzdGVuZXJcIjtcbmltcG9ydCB7IHVzZVRocm90dGxlIH0gZnJvbSBcIkAvaG9va3MvdXNlLXRyb3R0bGVcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUlkbGUobXM6IG51bWJlciA9IDEwMDAgKiA2MCk6IGJvb2xlYW4ge1xuICBjb25zdCBbaWRsZSwgc2V0SWRsZV0gPSBSZWFjdC51c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBsZXQgdGltZW91dElkOiBudW1iZXI7XG5cbiAgICBjb25zdCBoYW5kbGVUaW1lb3V0ID0gKCkgPT4ge1xuICAgICAgc2V0SWRsZSh0cnVlKTtcbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlRXZlbnQgPSB1c2VUaHJvdHRsZSgoZTogRXZlbnQpID0+IHtcbiAgICAgIHNldElkbGUoZmFsc2UpO1xuXG4gICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICB0aW1lb3V0SWQgPSB3aW5kb3cuc2V0VGltZW91dChoYW5kbGVUaW1lb3V0LCBtcyk7XG4gICAgfSwgNTAwKTtcblxuICAgIGNvbnN0IGhhbmRsZVZpc2liaWxpdHlDaGFuZ2UgPSAoZTogRXZlbnQpID0+IHtcbiAgICAgIGlmICghZG9jdW1lbnQuaGlkZGVuKSB7XG4gICAgICAgIGhhbmRsZUV2ZW50KGUpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aW1lb3V0SWQgPSB3aW5kb3cuc2V0VGltZW91dChoYW5kbGVUaW1lb3V0LCBtcyk7XG5cbiAgICB1c2VFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIGhhbmRsZUV2ZW50KTtcbiAgICB1c2VFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGhhbmRsZUV2ZW50KTtcbiAgICB1c2VFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGhhbmRsZUV2ZW50KTtcbiAgICB1c2VFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVFdmVudCk7XG4gICAgdXNlRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgaGFuZGxlRXZlbnQpO1xuICAgIHVzZUV2ZW50TGlzdGVuZXIoXCJ3aGVlbFwiLCBoYW5kbGVFdmVudCk7XG4gICAgdXNlRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgaGFuZGxlVmlzaWJpbGl0eUNoYW5nZSk7XG4gIH0sIFttc10pO1xuXG4gIHJldHVybiBpZGxlO1xufVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlTWVkaWFRdWVyeShxdWVyeTogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGNvbnN0IHN1YnNjcmliZSA9IFJlYWN0LnVzZUNhbGxiYWNrKFxuICAgIChjYWxsYmFjazogKHRoaXM6IE1lZGlhUXVlcnlMaXN0LCBldjogTWVkaWFRdWVyeUxpc3RFdmVudCkgPT4gYW55KSA9PiB7XG4gICAgICBjb25zdCBtYXRjaE1lZGlhID0gd2luZG93Lm1hdGNoTWVkaWEocXVlcnkpO1xuXG4gICAgICBtYXRjaE1lZGlhLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgY2FsbGJhY2spO1xuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgbWF0Y2hNZWRpYS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGNhbGxiYWNrKTtcbiAgICAgIH07XG4gICAgfSxcbiAgICBbcXVlcnldLFxuICApO1xuXG4gIGNvbnN0IGdldFNuYXBzaG90ID0gKCk6IGJvb2xlYW4gPT4ge1xuICAgIHJldHVybiB3aW5kb3cubWF0Y2hNZWRpYShxdWVyeSkubWF0Y2hlcztcbiAgfTtcblxuICBjb25zdCBnZXRTZXJ2ZXJTbmFwc2hvdCA9ICgpOiBib29sZWFuID0+IHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1c2VNZWRpYVF1ZXJ5IGlzIGEgY2xpZW50LW9ubHkgaG9va1wiKTtcbiAgfTtcblxuICByZXR1cm4gUmVhY3QudXNlU3luY0V4dGVybmFsU3RvcmUoc3Vic2NyaWJlLCBnZXRTbmFwc2hvdCwgZ2V0U2VydmVyU25hcHNob3QpO1xufVxuIiwiaW1wb3J0IHsgdXNlTWVkaWFRdWVyeSB9IGZyb20gXCJAL2hvb2tzL3VzZS1tZWRpYS1xdWVyeVwiO1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlUHJlZmVyc0RhcmtNb2RlKCk6IGJvb2xlYW4ge1xuICByZXR1cm4gdXNlTWVkaWFRdWVyeShcIihwcmVmZXJzLWNvbG9yLXNjaGVtZTogZGFyaylcIik7XG59XG4iLCJpbXBvcnQgeyB1c2VCcm93c2VyQWNjZXNzaWJpbGl0eVByZWZlcmVuY2VzIH0gZnJvbSBcIkAvaG9va3MvdXNlLWFjY2Vzc2liaWxpdHktcHJlZmVyZW5jZXNcIjtcbmltcG9ydCB7IHVzZU1lZGlhUXVlcnkgfSBmcm9tIFwiQC9ob29rcy91c2UtbWVkaWEtcXVlcnlcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZVByZWZlcnNIaWdoQ29udGFzdCgpOiBib29sZWFuIHtcbiAgcmV0dXJuIHVzZU1lZGlhUXVlcnkoXCIocHJlZmVycy1jb250cmFzdDogbW9yZSlcIik7XG59XG4iLCJpbXBvcnQgeyB1c2VNZWRpYVF1ZXJ5IH0gZnJvbSBcIkAvaG9va3MvdXNlLW1lZGlhLXF1ZXJ5XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VQcmVmZXJzTG93Q29udHJhc3QoKTogYm9vbGVhbiB7XG4gIHJldHVybiB1c2VNZWRpYVF1ZXJ5KFwiKHByZWZlcnMtY29udHJhc3Q6IGxlc3MpXCIpO1xufVxuIiwiaW1wb3J0IHsgdXNlTWVkaWFRdWVyeSB9IGZyb20gXCJAL2hvb2tzL3VzZS1tZWRpYS1xdWVyeVwiO1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlUHJlZmVyc1JlZHVjZWRNb3Rpb24oKTogYm9vbGVhbiB7XG4gIHJldHVybiB1c2VNZWRpYVF1ZXJ5KFwiKHByZWZlcnMtcmVkdWNlZC1tb3Rpb246IHJlZHVjZSlcIik7XG59XG4iLCJpbXBvcnQgeyB1c2VCcm93c2VyQWNjZXNzaWJpbGl0eVByZWZlcmVuY2VzIH0gZnJvbSBcIkAvaG9va3MvdXNlLWFjY2Vzc2liaWxpdHktcHJlZmVyZW5jZXNcIjtcbmltcG9ydCB7IHVzZU1lZGlhUXVlcnkgfSBmcm9tIFwiQC9ob29rcy91c2UtbWVkaWEtcXVlcnlcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZVByZWZlcnNSZWR1Y2VkVHJhbnNwYXJhbmN5KCk6IGJvb2xlYW4ge1xuICByZXR1cm4gdXNlTWVkaWFRdWVyeShcIihwcmVmZXJzLXJlZHVjZWQtdHJhbnNwYXJlbmN5OiByZWR1Y2UpXCIpO1xufVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgQXN5bmNSZXN1bHQsIEF3YWl0aW5nLCBTdWNjZXNzLCBGYWlsdXJlIH0gZnJvbSBcIkB0YWN0aWNzL2pzLW1vbmFkXCI7XG5cbmludGVyZmFjZSBTY3JpcHRPcHRpb25zIHtcbiAgcmVtb3ZlT25Vbm1vdW50PzogYm9vbGVhbjtcbn1cblxudHlwZSBTdWNjZXNzUmVzcG9uc2UgPSBcInJlYWR5XCIgfCBcImV4dGVybmFsXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VTY3JpcHQoXG4gIHNyYzogc3RyaW5nLFxuICBvcHRpb25zOiBTY3JpcHRPcHRpb25zID0ge30sXG4pOiBBc3luY1Jlc3VsdDxTdWNjZXNzUmVzcG9uc2U+IHtcbiAgY29uc3QgW3N0YXR1cywgc2V0U3RhdHVzXSA9IFJlYWN0LnVzZVN0YXRlPEFzeW5jUmVzdWx0PGJvb2xlYW4+PihcbiAgICBuZXcgQXdhaXRpbmcoKSxcbiAgKTtcbiAgY29uc3Qgb3B0aW9uc1JlZiA9IFJlYWN0LnVzZVJlZjxTY3JpcHRPcHRpb25zPihvcHRpb25zKTtcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxldCBzY3JpcHQ6IEhUTUxTY3JpcHRFbGVtZW50IHwgbnVsbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgc2NyaXB0W3NyYz1cIiR7c3JjfVwiXWAsXG4gICAgKTtcblxuICAgIGlmIChzY3JpcHQpIHtcbiAgICAgIC8vIFdoZW4gc3RhdHVzIGlzIG51bGwsIGEgc2NyaXB0IGlzIGV4dGVybmFsbHkgYWRkZWQgb3V0c2lkZSBvZiB0aGlzIGZ1bmN0aW9uLCB3ZSBhc3N1bWUgc3VjY2VzcyBhbmQgbWFyayBpdCBhcyBleHRlcm5hbFxuICAgICAgY29uc3QgZG9tU3RhdHVzID0gc2NyaXB0LmdldEF0dHJpYnV0ZShcImRhdGEtc3RhdHVzXCIpO1xuICAgICAgc3dpdGNoIChkb21TdGF0dXMpIHtcbiAgICAgICAgY2FzZSBcInJlYWR5XCI6XG4gICAgICAgICAgc2V0U3RhdHVzKFN1Y2Nlc3Mub2YoXCJyZWFkeVwiKSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJlcnJvclwiOlxuICAgICAgICAgIHNldFN0YXR1cyhGYWlsdXJlLmR1ZVRvKGBGYWlsZWQgdG8gbG9hZCBzY3JpcHQ6ICR7c3JjfWAsIFwiZXJyb3JcIikpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHNldFN0YXR1cyhTdWNjZXNzLm9mKFwiZXh0ZXJuYWxcIikpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuICAgICAgaWYgKHNjcmlwdCkge1xuICAgICAgICBzY3JpcHQuc3JjID0gc3JjO1xuICAgICAgICBzY3JpcHQuYXN5bmMgPSB0cnVlO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdCk7XG5cbiAgICAgICAgY29uc3QgaGFuZGxlU2NyaXB0TG9hZCA9ICgpID0+IHtcbiAgICAgICAgICBzY3JpcHQ/LnNldEF0dHJpYnV0ZShcImRhdGEtc3RhdHVzXCIsIFwicmVhZHlcIik7XG4gICAgICAgICAgc2V0U3RhdHVzKFN1Y2Nlc3Mub2YodHJ1ZSkpO1xuICAgICAgICAgIGNsZWFudXBMaXN0ZW5lcnMoKTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBoYW5kbGVTY3JpcHRFcnJvciA9ICgpID0+IHtcbiAgICAgICAgICBzY3JpcHQ/LnNldEF0dHJpYnV0ZShcImRhdGEtc3RhdHVzXCIsIFwiZXJyb3JcIik7XG4gICAgICAgICAgc2V0U3RhdHVzKEZhaWx1cmUuZHVlVG8oYEZhaWxlZCB0byBsb2FkIHNjcmlwdDogJHtzcmN9YCwgXCJlcnJvclwiKSk7XG4gICAgICAgICAgY2xlYW51cExpc3RlbmVycygpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGNsZWFudXBMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgICAgICAgc2NyaXB0Py5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZFwiLCBoYW5kbGVTY3JpcHRMb2FkKTtcbiAgICAgICAgICBzY3JpcHQ/LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCBoYW5kbGVTY3JpcHRFcnJvcik7XG4gICAgICAgIH07XG5cbiAgICAgICAgc2NyaXB0LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGhhbmRsZVNjcmlwdExvYWQpO1xuICAgICAgICBzY3JpcHQuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIGhhbmRsZVNjcmlwdEVycm9yKTtcblxuICAgICAgICBjb25zdCByZW1vdmVPblVubW91bnQgPSBvcHRpb25zUmVmLmN1cnJlbnQucmVtb3ZlT25Vbm1vdW50O1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgIGlmIChyZW1vdmVPblVubW91bnQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHNjcmlwdD8ucmVtb3ZlKCk7XG4gICAgICAgICAgICBjbGVhbnVwTGlzdGVuZXJzKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0U3RhdHVzKFxuICAgICAgICAgIEZhaWx1cmUuZHVlVG8oYEZhaWxlZCB0byBhZGQgc2NyaXB0IHRhZyBmb3IgOiAke3NyY31gLCBcImVycm9yXCIpLFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfSwgW3NyY10pO1xuXG4gIHJldHVybiBzdGF0dXM7XG59XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBSZXN1bHQgfSBmcm9tIFwiQHRhY3RpY3MvanMtbW9uYWRcIjtcbmltcG9ydCB7XG4gIGdldFN0b3JhZ2VJdGVtLFxuICBnZXRTdG9yYWdlU2VydmVyU25hcHNob3QsXG4gIHJlbW92ZVN0b3JhZ2VJdGVtLFxuICBzZXRTdG9yYWdlSXRlbSxcbiAgdXNlU3RvcmFnZVN1YnNjcmliZSxcbn0gZnJvbSBcIkAvc3RvcmFnZS9zdG9yYWdlXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VTdG9yYWdlPFQ+KFxuICBrZXk6IHN0cmluZyxcbiAgaW5pdGlhbFZhbHVlOiBULFxuICBzdG9yYWdlQXJlYTogU3RvcmFnZSxcbik6IFtSZXN1bHQ8VD4sICh2YWx1ZTogUmVhY3QuU2V0U3RhdGVBY3Rpb248VD4pID0+IHZvaWQsICgpID0+IHZvaWRdIHtcbiAgY29uc3QgZ2V0U25hcHNob3QgPSAoKSA9PiBnZXRTdG9yYWdlSXRlbTxUPihrZXksIHN0b3JhZ2VBcmVhKTtcbiAgY29uc3Qgc3RvcmVkID0gUmVhY3QudXNlU3luY0V4dGVybmFsU3RvcmUoXG4gICAgdXNlU3RvcmFnZVN1YnNjcmliZSxcbiAgICBnZXRTbmFwc2hvdCxcbiAgICBnZXRTdG9yYWdlU2VydmVyU25hcHNob3QsXG4gICk7XG5cbiAgY29uc3Qgc2V0ID0gUmVhY3QudXNlQ2FsbGJhY2soXG4gICAgKHZhbHVlOiBSZWFjdC5TZXRTdGF0ZUFjdGlvbjxUPikgPT4ge1xuICAgICAgY29uc3QgbmV4dFN0YXRlID0gdmFsdWU7XG4gICAgICBpZiAobmV4dFN0YXRlID09PSBudWxsKSB7XG4gICAgICAgIHJlbW92ZVN0b3JhZ2VJdGVtKGtleSwgc3RvcmFnZUFyZWEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0U3RvcmFnZUl0ZW0oa2V5LCBuZXh0U3RhdGUsIHN0b3JhZ2VBcmVhKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFtrZXksIHN0b3JlZF0sXG4gICk7XG5cbiAgY29uc3QgY2xlYXIgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgcmVtb3ZlU3RvcmFnZUl0ZW0oa2V5LCBzdG9yYWdlQXJlYSk7XG4gIH0sIFtrZXksIHN0b3JlZF0pO1xuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0U3RvcmFnZUl0ZW0oa2V5LCBpbml0aWFsVmFsdWUsIHN0b3JhZ2VBcmVhKTtcbiAgfSwgW2tleSwgaW5pdGlhbFZhbHVlXSk7XG5cbiAgcmV0dXJuIFtzdG9yZWQsIHNldCwgY2xlYXJdO1xufVxuIiwiaW1wb3J0IHsgRmFpbHVyZSwgUmVzdWx0LCBTdWNjZXNzIH0gZnJvbSBcIkB0YWN0aWNzL2pzLW1vbmFkXCI7XG5cbmV4cG9ydCBjb25zdCBlbnVtIFN0b3JhZ2VGYWlsdXJlcyB7XG4gIE5PVF9BVkFJTEFCTEUgPSBcIk5PVF9BVkFJTEFCTEVcIixcbiAgSU5WQUxJRF9GT1JNQVQgPSBcIklOVkFMSURfRk9STUFUXCIsXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXNwYXRjaFN0b3JhZ2VFdmVudChcbiAga2V5OiBzdHJpbmcsXG4gIG5ld1ZhbHVlOiBhbnksXG4gIG9sZFZhbHVlOiBhbnksXG4gIHN0b3JhZ2VBcmVhOiBTdG9yYWdlLFxuKSB7XG4gIHdpbmRvdy5kaXNwYXRjaEV2ZW50KFxuICAgIG5ldyBTdG9yYWdlRXZlbnQoXCJzdG9yYWdlXCIsIHsga2V5LCBuZXdWYWx1ZSwgb2xkVmFsdWUsIHN0b3JhZ2VBcmVhIH0pLFxuICApO1xufVxuXG5leHBvcnQgY29uc3QgdXNlU3RvcmFnZVN1YnNjcmliZSA9IChcbiAgY2FsbGJhY2s6IChldmVudDogU3RvcmFnZUV2ZW50KSA9PiB2b2lkLFxuKSA9PiB7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic3RvcmFnZVwiLCBjYWxsYmFjayk7XG4gIHJldHVybiAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInN0b3JhZ2VcIiwgY2FsbGJhY2spO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldFN0b3JhZ2VTZXJ2ZXJTbmFwc2hvdCA9ICgpID0+IHtcbiAgdGhyb3cgRXJyb3IoXCJ0aGlzIGlzIGEgY2xpZW50LW9ubHkgaG9va1wiKTtcbn07XG5cbi8vIEhlbHBlciBmdW5jdGlvbnMgdG8gaW50ZXJhY3Qgd2l0aCBzZXNzaW9uU3RvcmFnZVxuZXhwb3J0IGZ1bmN0aW9uIGdldFN0b3JhZ2VJdGVtPFQ+KFxuICBrZXk6IHN0cmluZyxcbiAgc3RvcmFnZUFyZWE6IFN0b3JhZ2UsXG4pOiBSZXN1bHQ8VD4ge1xuICBjb25zdCBpdGVtID0gc3RvcmFnZUFyZWEuZ2V0SXRlbShrZXkpO1xuICBpZiAoIWl0ZW0pIHtcbiAgICByZXR1cm4gRmFpbHVyZS5kdWVUbyhcbiAgICAgIGAke2tleX0gaXMgbm90IGF2YWlsYWJsZSBpbiAke3N0b3JhZ2VBcmVhfSBzdG9yYWdlYCxcbiAgICAgIFN0b3JhZ2VGYWlsdXJlcy5OT1RfQVZBSUxBQkxFLFxuICAgICk7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IG9iamVjdCA9IEpTT04ucGFyc2UoaXRlbSk7XG4gICAgcmV0dXJuIFN1Y2Nlc3Mub2Yob2JqZWN0KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gRmFpbHVyZS5kdWVUbyhcbiAgICAgIGAke2tleX0gaGFzIGludmFsaWQgZm9ybWF0IGluIHN0b3JhZ2VgLFxuICAgICAgU3RvcmFnZUZhaWx1cmVzLklOVkFMSURfRk9STUFULFxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldFN0b3JhZ2VJdGVtPFQ+KFxuICBrZXk6IHN0cmluZyxcbiAgdmFsdWU6IFQsXG4gIHN0b3JhZ2VBcmVhOiBTdG9yYWdlLFxuKTogUmVzdWx0PFQ+IHtcbiAgY29uc3QgY3VycmVudEl0ZW0gPSBnZXRTdG9yYWdlSXRlbShrZXksIHN0b3JhZ2VBcmVhKTtcblxuICB0cnkge1xuICAgIGNvbnN0IGl0ZW0gPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG4gICAgc3RvcmFnZUFyZWEuc2V0SXRlbShrZXksIGl0ZW0pO1xuICAgIGRpc3BhdGNoU3RvcmFnZUV2ZW50KFxuICAgICAga2V5LFxuICAgICAgdmFsdWUsXG4gICAgICBjdXJyZW50SXRlbSBpbnN0YW5jZW9mIEZhaWx1cmUgPyBudWxsIDogY3VycmVudEl0ZW0udW53cmFwKCksXG4gICAgICBzdG9yYWdlQXJlYSxcbiAgICApO1xuICAgIHJldHVybiBTdWNjZXNzLm9mKHZhbHVlKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gRmFpbHVyZS5kdWVUbyhcbiAgICAgIGAke3ZhbHVlfSBoYXMgaW52YWxpZCBmb3JtYXQgdG8gcHV0IGludG8gc3RvcmFnZWAsXG4gICAgICBTdG9yYWdlRmFpbHVyZXMuSU5WQUxJRF9GT1JNQVQsXG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlU3RvcmFnZUl0ZW0oXG4gIGtleTogc3RyaW5nLFxuICBzdG9yYWdlQXJlYTogU3RvcmFnZSxcbik6IFJlc3VsdDxzdHJpbmc+IHtcbiAgY29uc3QgY3VycmVudEl0ZW0gPSBnZXRTdG9yYWdlSXRlbShrZXksIHN0b3JhZ2VBcmVhKTtcbiAgaWYgKGN1cnJlbnRJdGVtIGluc3RhbmNlb2YgRmFpbHVyZSkge1xuICAgIHN0b3JhZ2VBcmVhLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICByZXR1cm4gU3VjY2Vzcy5vZihrZXkpO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBzdG9yYWdlQXJlYS5yZW1vdmVJdGVtKGtleSk7XG4gICAgZGlzcGF0Y2hTdG9yYWdlRXZlbnQoa2V5LCBudWxsLCBjdXJyZW50SXRlbS51bndyYXAoKSwgc3RvcmFnZUFyZWEpO1xuICAgIHJldHVybiBTdWNjZXNzLm9mKGtleSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIEZhaWx1cmUuZHVlVG8oXG4gICAgICBgJHtrZXl9IGNvdWxkIG5vdCBiZSByZW1vdmVkIGZyb20gc3RvcmFnZWAsXG4gICAgICBTdG9yYWdlRmFpbHVyZXMuSU5WQUxJRF9GT1JNQVQsXG4gICAgKTtcbiAgfVxufVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIFNjcm9sbFN0YXRlIHtcbiAgeDogbnVtYmVyO1xuICB5OiBudW1iZXI7XG59XG5cbmV4cG9ydCB0eXBlIFNjcm9sbFRvQXJncyA9IFtvcHRpb25zOiBTY3JvbGxUb09wdGlvbnNdIHwgW3g6IG51bWJlciwgeTogbnVtYmVyXTtcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZVdpbmRvd1Njcm9sbCgpOiBbXG4gIFNjcm9sbFN0YXRlLFxuICAoLi4uYXJnczogU2Nyb2xsVG9BcmdzKSA9PiB2b2lkLFxuXSB7XG4gIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gUmVhY3QudXNlU3RhdGU8U2Nyb2xsU3RhdGU+KHtcbiAgICB4OiAwLFxuICAgIHk6IDAsXG4gIH0pO1xuXG4gIGNvbnN0IHNjcm9sbFRvID0gUmVhY3QudXNlQ2FsbGJhY2soKC4uLmFyZ3M6IFNjcm9sbFRvQXJncykgPT4ge1xuICAgIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgd2luZG93LnNjcm9sbFRvKGFyZ3NbMF0pO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGFyZ3NbMF0gPT09IFwibnVtYmVyXCIgJiYgdHlwZW9mIGFyZ3NbMV0gPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIHdpbmRvdy5zY3JvbGxUbyhhcmdzWzBdLCBhcmdzWzFdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgSW52YWxpZCBhcmd1bWVudHMgcGFzc2VkIHRvIHNjcm9sbFRvLiBTZWUgaGVyZSBmb3IgbW9yZSBpbmZvOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV2luZG93L3Njcm9sbFRvYCxcbiAgICAgICk7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgUmVhY3QudXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVTY3JvbGwgPSAoKSA9PiB7XG4gICAgICBzZXRTdGF0ZSh7IHg6IHdpbmRvdy5zY3JvbGxYLCB5OiB3aW5kb3cuc2Nyb2xsWSB9KTtcbiAgICB9O1xuXG4gICAgaGFuZGxlU2Nyb2xsKCk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgaGFuZGxlU2Nyb2xsKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBoYW5kbGVTY3JvbGwpO1xuICAgIH07XG4gIH0sIFtdKTtcblxuICByZXR1cm4gW3N0YXRlLCBzY3JvbGxUb107XG59XG4iLCJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlLCBSZWZPYmplY3QgfSBmcm9tIFwicmVhY3RcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZU9uU2NyZWVuKFxuICByZWY6IFJlZk9iamVjdDxFbGVtZW50PixcbiAgcm9vdE1hcmdpbjogc3RyaW5nID0gXCIwcHhcIixcbik6IGJvb2xlYW4ge1xuICBjb25zdCBbaXNWaXNpYmxlLCBzZXRJc1Zpc2libGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHJlZi5jdXJyZW50ID09IG51bGwpIHJldHVybjtcblxuICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKFxuICAgICAgKFtlbnRyeV0pID0+IHNldElzVmlzaWJsZShlbnRyeS5pc0ludGVyc2VjdGluZyksXG4gICAgICB7IHJvb3RNYXJnaW4gfSxcbiAgICApO1xuXG4gICAgb2JzZXJ2ZXIub2JzZXJ2ZShyZWYuY3VycmVudCk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKHJlZi5jdXJyZW50ID09IG51bGwpIHJldHVybjtcbiAgICAgIG9ic2VydmVyLnVub2JzZXJ2ZShyZWYuY3VycmVudCk7XG4gICAgfTtcbiAgfSwgW3JlZi5jdXJyZW50LCByb290TWFyZ2luXSk7XG5cbiAgcmV0dXJuIGlzVmlzaWJsZTtcbn1cbiIsImV4cG9ydCBjbGFzcyBCcm93c2VyQWNjZXNzaWJpbGl0eVByZWZlcmVuY2VzIHtcbiAgcmVhZG9ubHkgcmVkdWNlZE1vdGlvbjogYm9vbGVhbjtcbiAgcmVhZG9ubHkgaGlnaENvbnRyYXN0OiBib29sZWFuO1xuICByZWFkb25seSBsb3dDb250cmFzdDogYm9vbGVhbjtcbiAgcmVhZG9ubHkgcmVkdWNlZFRyYW5zcGFyZW5jeTogYm9vbGVhbjtcbiAgcmVhZG9ubHkgZGFya01vZGU6IGJvb2xlYW47XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcmVkdWNlZE1vdGlvbjogYm9vbGVhbixcbiAgICBoaWdoQ29udHJhc3Q6IGJvb2xlYW4sXG4gICAgbG93Q29udHJhc3Q6IGJvb2xlYW4sXG4gICAgcmVkdWNlZFRyYW5zcGFyZW5jeTogYm9vbGVhbixcbiAgICBkYXJrTW9kZTogYm9vbGVhbixcbiAgKSB7XG4gICAgdGhpcy5yZWR1Y2VkTW90aW9uID0gcmVkdWNlZE1vdGlvbjtcbiAgICB0aGlzLmhpZ2hDb250cmFzdCA9IGhpZ2hDb250cmFzdDtcbiAgICB0aGlzLmxvd0NvbnRyYXN0ID0gbG93Q29udHJhc3Q7XG4gICAgdGhpcy5yZWR1Y2VkVHJhbnNwYXJlbmN5ID0gcmVkdWNlZFRyYW5zcGFyZW5jeTtcbiAgICB0aGlzLmRhcmtNb2RlID0gZGFya01vZGU7XG4gIH1cblxuICBwcmVmZXJzRGFya01vZGUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZGFya01vZGU7XG4gIH1cblxuICBwcmVmZXJzSGlnaENvbnRyYXN0KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmhpZ2hDb250cmFzdDtcbiAgfVxuXG4gIHByZWZlcnNMb3dDb250cmFzdCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5sb3dDb250cmFzdDtcbiAgfVxuXG4gIHByZWZlcnNSZWR1Y2VkTW90aW9uKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnJlZHVjZWRNb3Rpb247XG4gIH1cblxuICBwcmVmZXJzVHJhbnNwYXJlbmN5KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnJlZHVjZWRUcmFuc3BhcmVuY3k7XG4gIH1cbn1cbiIsImltcG9ydCB7IEJyb3dzZXJBY2Nlc3NpYmlsaXR5UHJlZmVyZW5jZXMgfSBmcm9tIFwiQC9hY2Nlc3NpYmlsaXR5L3ByZWZlcmVuY2VzXCI7XG5pbXBvcnQgeyB1c2VNZWRpYVF1ZXJ5IH0gZnJvbSBcIkAvaG9va3MvdXNlLW1lZGlhLXF1ZXJ5XCI7XG5pbXBvcnQgeyB1c2VQcmVmZXJzUmVkdWNlZE1vdGlvbiB9IGZyb20gXCJAL2hvb2tzL3VzZS1wcmVmZXJzLXJlZHVjZWQtbW90aW9uXCI7XG5pbXBvcnQgeyB1c2VQcmVmZXJzTG93Q29udHJhc3QgfSBmcm9tIFwiQC9ob29rcy91c2UtcHJlZmVycy1sb3ctY29udHJhc3RcIjtcbmltcG9ydCB7IHVzZVByZWZlcnNIaWdoQ29udGFzdCB9IGZyb20gXCJAL2hvb2tzL3VzZS1wcmVmZXJzLWhpZ2gtY29udGFzdFwiO1xuaW1wb3J0IHsgdXNlUHJlZmVyc1JlZHVjZWRUcmFuc3BhcmFuY3kgfSBmcm9tIFwiQC9ob29rcy91c2UtcHJlZmVycy1yZWR1Y2VkLXRyYW5zcGFyYW5jeVwiO1xuaW1wb3J0IHsgdXNlUHJlZmVyc0RhcmtNb2RlIH0gZnJvbSBcIkAvaG9va3MvdXNlLXByZWZlcnMtZGFyay1tb2RlXCI7XG5cbmNvbnN0IHVzZUJyb3dzZXJBY2Nlc3NpYmlsaXR5UHJlZmVyZW5jZXMgPVxuICAoKTogQnJvd3NlckFjY2Vzc2liaWxpdHlQcmVmZXJlbmNlcyA9PiB7XG4gICAgY29uc3QgaGFzUmVkdWNlZE1vdGlvbiA9IHVzZVByZWZlcnNSZWR1Y2VkTW90aW9uKCk7XG4gICAgY29uc3QgaGFzSGlnaENvbnRyYXN0ID0gdXNlUHJlZmVyc0hpZ2hDb250YXN0KCk7XG4gICAgY29uc3QgaGFzTG93Q29udHJhc3QgPSB1c2VQcmVmZXJzTG93Q29udHJhc3QoKTtcbiAgICBjb25zdCBoYXNSZWR1Y2VkVHJhbnNwYXJlbmN5ID0gdXNlUHJlZmVyc1JlZHVjZWRUcmFuc3BhcmFuY3koKTtcbiAgICBjb25zdCBoYXNEYXJrTW9kZSA9IHVzZVByZWZlcnNEYXJrTW9kZSgpO1xuXG4gICAgcmV0dXJuIG5ldyBCcm93c2VyQWNjZXNzaWJpbGl0eVByZWZlcmVuY2VzKFxuICAgICAgaGFzUmVkdWNlZE1vdGlvbixcbiAgICAgIGhhc0hpZ2hDb250cmFzdCxcbiAgICAgIGhhc0xvd0NvbnRyYXN0LFxuICAgICAgaGFzUmVkdWNlZFRyYW5zcGFyZW5jeSxcbiAgICAgIGhhc0RhcmtNb2RlLFxuICAgICk7XG4gIH07XG5cbmV4cG9ydCB7IHVzZUJyb3dzZXJBY2Nlc3NpYmlsaXR5UHJlZmVyZW5jZXMgfTtcbiJdfQ==